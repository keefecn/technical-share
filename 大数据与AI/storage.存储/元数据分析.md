| 序号  | 修改时间       | 修改内容       | 修改人   | 审稿人   |
| --- | ---------- | ---------- | ----- | ----- |
| 1   | 2018-08-22 | 创建         | Keefe | Keefe |
| 2   | 2021-8-6   | 更新MySQL元数据 | 同上    |       |

<br><br><br>

---

[TOC]

<br>

---

# 1 元数据

## 1.1  定义

**元数据**（**Metadata**），又称中介数据、中继数据，为描述数据的数据（data about data），主要是描述数据属性（property）的信息，用来支持如指示存储位置、历史数据、资源查找、文件记录等功能。元数据算是一种电子式目录，为了达到编制目录的目的，必须在描述并收藏数据的内容或特色，进而达成协助数据检索的目的。

**数据库领域**

元数据是关于数据的数据，如数据库名或表名，列的数据类型，或访问权限等。有些时候用于表述该信息的其他术语包括“数据词典”和“系统目录”。

**数据仓库领域**

在[数据仓库](https://baike.baidu.com/item/数据仓库)领域中，元数据按用途分成技术元数据和业务元数据。首先，元数据能提供基于用户的信息，如记录数据项的业务描述信息的元数据能帮助用户使用数据。其次，元数据能支持系统对数据的管理和维护，如关于数据项存储方法的元数据能支持系统以最有效的方式访问数据。具体来说，在数据仓库系统中，元数据机制主要支持以下五类系统管理功能:

（1）描述哪些数据在数据仓库中；

（2）定义要进入数据仓库中的数据和从数据仓库中产生的数据；

（3）记录根据业务事件发生而随之进行的数据抽取工作时间安排；

（4）记录并检测系统数据一致性的要求和执行情况；

（5）衡量数据质量。

**数据仓库中的元数据主要分为三类**：

* 操作型元数据：包含了所有操作型数据源的信息。
* 抽取和转换元数据：包含了源数据系统的信息，例如，抽取频率、抽取方法和数据抽取的商业规则。而且，这一类的元数据包含了数据准备阶段数据转换的所有信息。
* 最终用户元数据：最终用户元数据是数据仓库的向导。它使最终用户可以从数据仓库中找到自己需要的信息。最终用户元数据允许最终用户使用自己商业终端和自己的习惯来查询数据。

**软件构造领域**

软件构造领域的定义在软件构造领域，元数据被定义为：在程序中不是被加工的对象，而是通过其值的改变来改变程序的行为的数据。它在运行过程中起着以解释方式控制程序行为的作用。在程序的不同位置配置不同值的元数据，就可以得到与原来[等价](https://baike.baidu.com/item/等价)的程序行为。

此处，元数据相当于编程语言中的常量。

**图书信息领域**

在图书馆与信息界，元数据被定义为：提供关于信息资源或数据的一种结构化的数据，是对信息资源的结构化的描述。其作用为：描述信息资源或数据本身的特征和属性，规定数字化信息的组织，具有定位、发现、证明、评估、选择等功能。

## 1.2  例举

基于应用，可以将元数据分成以下的若干种。

数据结构：数据集的名称、关系、字段、约束等；

数据部署：数据集的物理位置；

[数据流](https://baike.baidu.com/item/数据流)：数据集之间的流程依赖关系（非参照依赖），包括数据集到另一个数据集的规则；

质量度量：数据集上可以计算的度量；

度量逻辑关系：数据集度量之间的逻辑运算关系；

ETL过程：过程运行的顺序，并行、串行；

数据集[快照](https://baike.baidu.com/item/快照)：一个时间点上，数据在所有数据集上的分布情况；

星型模式元数据：事实表、维度、属性、层次等；

报表语义层：报表[指标](https://baike.baidu.com/item/指标)的规则、过滤条件物理名称和业务名称的对应；

数据访问日志：哪些数据何时被何人访问；

质量稽核日志：何时、何度量被稽核，其结果；

数据装载日志：哪些数据何时被何人装载；

## 1.3  标准

元数据的标准有两个独立的方面：元数据联合，以及对象管理组。

**元数据联盟**。1995 年的10 月，作为一个由厂商和感兴趣的团体建立的协会，该协会一直在进行被称为“开放式信息模型（OIM）”的元数据标准制订工作。微软在1998 年12 月加入了这个协会，与其它主要厂商一起成为坚定的支持者。在1999 年的7 月，元数据协会接受开放式信息模型作为标准，并开始继续开发它的扩展部分。在1999 年11 月，该协会正在努力推动新的关键标准。

**对象管理组**。另一个厂商的组织，包括Oracle，IBM，HP，Sun 和Unisys 等公司，通过对象管理组来寻找元数据的标准。对象管理组是一个解决对象技术中标准问题的大型组织。在2000 年6 月，对象管理组将“通用数据仓库元模型（CWM）”作为数据仓库元数据交换的标准。

## 1.4  本章参考

[1]. 元数据 [https://baike.baidu.com/item/%E5%85%83%E6%95%B0%E6%8D%AE](https://baike.baidu.com/item/元数据)

<br>

# 2 MySQL

## 2.1  MySQL元数据概述

| DB_NAME            | 简述                            | 详述                                                                           | 表总数（张） |     |     |
| ------------------ | ----------------------------- | ---------------------------------------------------------------------------- | ------ | --- | --- |
| MySQL版本version     |                               |                                                                              | 5.6    | 5.7 | 8.0 |
| mysql              | 核心数据库，类似于sql server中的master表。 | 主要负责存储数据库的用户、权限设置、关键字等mysql自己需要使用的控制和管理信息，不可以删除。                             | 28     | 31  | 33  |
| information_schema | 信息数据库，提供了访问数据库元数据的方式。         | 保存着关于MySQL服务器所维护的所有其他数据库的信息。 MySQL 5.7后包括了28张INNODB_表。<br>show表达式扩展多来自这里的视图。 | 58     | 61  | 78  |
| performance_schema | 性能数据库。                        | MySQL 5.5后新增。用于收集数据库服务器性能参数。                                                 | 52     | 87  | 105 |
| sys                |                               | 5.7后新增。                                                                      | 0      | 101 | 101 |

备注：1. MySQL 5.6的元数据表是3张，MySQL5.7+后增加了sys表。通常情况下，DB客户端不显示mysql和information_schema。

2. INFORMATION_SCHEMA，有数个只读表。它们实际上是视图，而不是基本表，因此，你将无法看到与之相关的任何文件。每位MySQL用户均有权访问这些表，但仅限于表中的特定行，在这类行中含有用户具有恰当访问权限的对象。

表格  获取MySQL元数据的命令列表

| 命令                 | 描述             |
| ------------------ | -------------- |
| SELECT VERSION( )  | 服务器版本信息        |
| SELECT DATABASE( ) | 当前数据库名 (或者返回空) |
| SELECT USER( )     | 当前用户名          |
| SHOW STATUS        | 服务器状态          |
| SHOW VARIABLES     | 服务器配置变量        |

示例：

```mysql
mysql> SELECT VERSION( );
+------------+
| VERSION( ) |
+------------+
| 8.0.21     |
+------------+
1 row in set (0.00 sec)

mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
5 rows in set (0.00 sec)
```

**show语法**

```sql
mysql> help show;
Name: 'SHOW'
Description:
SHOW has many forms that provide information about databases, tables,
columns, or status information about the server. This section describes
those following:

SHOW {BINARY | MASTER} LOGS
SHOW BINLOG EVENTS [IN 'log_name'] [FROM pos] [LIMIT [offset,] row_count]
SHOW CHARACTER SET [like_or_where]
SHOW COLLATION [like_or_where]
SHOW [FULL] COLUMNS FROM tbl_name [FROM db_name] [like_or_where]
SHOW CREATE DATABASE db_name
SHOW CREATE EVENT event_name
SHOW CREATE FUNCTION func_name
SHOW CREATE PROCEDURE proc_name
SHOW CREATE TABLE tbl_name
SHOW CREATE TRIGGER trigger_name
SHOW CREATE VIEW view_name
SHOW DATABASES [like_or_where]
SHOW ENGINE engine_name {STATUS | MUTEX}
SHOW [STORAGE] ENGINES
SHOW ERRORS [LIMIT [offset,] row_count]
SHOW EVENTS
SHOW FUNCTION CODE func_name
SHOW FUNCTION STATUS [like_or_where]
SHOW GRANTS FOR user
SHOW INDEX FROM tbl_name [FROM db_name]
SHOW MASTER STATUS
SHOW OPEN TABLES [FROM db_name] [like_or_where]
SHOW PLUGINS
SHOW PROCEDURE CODE proc_name
SHOW PROCEDURE STATUS [like_or_where]
SHOW PRIVILEGES
SHOW [FULL] PROCESSLIST
SHOW PROFILE [types] [FOR QUERY n] [OFFSET n] [LIMIT n]
SHOW PROFILES
SHOW RELAYLOG EVENTS [IN 'log_name'] [FROM pos] [LIMIT [offset,] row_count]
SHOW SLAVE HOSTS
SHOW SLAVE STATUS [FOR CHANNEL channel]
SHOW [GLOBAL | SESSION] STATUS [like_or_where]
SHOW TABLE STATUS [FROM db_name] [like_or_where]
SHOW [FULL] TABLES [FROM db_name] [like_or_where]
SHOW TRIGGERS [FROM db_name] [like_or_where]
SHOW [GLOBAL | SESSION] VARIABLES [like_or_where]
SHOW WARNINGS [LIMIT [offset,] row_count]

like_or_where: {
    LIKE 'pattern'
  | WHERE expr
}
```

information_schema.tables里的表信息

* table_type三种：BASE TABLE, SYSTEM VIEW, VIEW
* engine:  MEMORY, InnoDB, MyISAM, CSV, PERFORMATION_SCHEMA, NULL(当table_type=VIEW时)
* table_schema: MySQL里的schema等同于数据库。

```sql
# 以下2个SQL执行结果一样
mysql> select distinct table_type FROM information_schema.tables;
mysql> select table_type FROM information_schema.tables group by table_type;
+-------------+
| TABLE_TYPE  |
+-------------+
| SYSTEM VIEW |
| BASE TABLE  |
| VIEW        |
+-------------+
3 rows in set (0.00 sec)

mysql> show engines;
+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+
| Engine             | Support | Comment                                                        | Transactions | XA   | Savepoints |
+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+
| FEDERATED          | NO      | Federated MySQL storage engine                                 | NULL         | NULL | NULL       |
| MEMORY             | YES     | Hash based, stored in memory, useful for temporary tables      | NO           | NO   | NO         |
| InnoDB             | DEFAULT | Supports transactions, row-level locking, and foreign keys     | YES          | YES  | YES        |
| PERFORMANCE_SCHEMA | YES     | Performance Schema                                             | NO           | NO   | NO         |
| MyISAM             | YES     | MyISAM storage engine                                          | NO           | NO   | NO         |
| MRG_MYISAM         | YES     | Collection of identical MyISAM tables                          | NO           | NO   | NO         |
| BLACKHOLE          | YES     | /dev/null storage engine (anything you write to it disappears) | NO           | NO   | NO         |
| CSV                | YES     | CSV storage engine                                             | NO           | NO   | NO         |
| ARCHIVE            | YES     | Archive storage engine                                         | NO           | NO   | NO         |
+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+
9 rows in set (0.00 sec)
```

## 2.2   mysql 核心数据库

```sql
# 下面二条命令的结果显示是一样
mysql> show tables;
mysql> show tables from mysql;
+---------------------------+
| Tables_in_mysql           |
+---------------------------+
| columns_priv              |
| component                 |
| db                        |
| default_roles             |
| engine_cost               |
| func                      |
| general_log               |
| global_grants             |
| gtid_executed             |
| help_category             |
| help_keyword              |
| help_relation             |
| help_topic                |
| innodb_index_stats        |
| innodb_table_stats        |
| password_history          |
| plugin                    |
| procs_priv                |
| proxies_priv              |
| role_edges                |
| server_cost               |
| servers                   |
| slave_master_info         |
| slave_relay_log_info      |
| slave_worker_info         |
| slow_log                  |
| tables_priv               |
| time_zone                 |
| time_zone_leap_second     |
| time_zone_name            |
| time_zone_transition      |
| time_zone_transition_type |
| user                      |
+---------------------------+
33 rows in set (0.00 sec)

mysql> SELECT table_name, table_type, engine
       FROM information_schema.tables
       WHERE table_schema = 'mysql'
       ORDER BY table_name;
+---------------------------+------------+--------+
| TABLE_NAME                | TABLE_TYPE | ENGINE |
+---------------------------+------------+--------+
| columns_priv              | BASE TABLE | InnoDB |
| component                 | BASE TABLE | InnoDB |
| db                        | BASE TABLE | InnoDB |
| default_roles             | BASE TABLE | InnoDB |
| engine_cost               | BASE TABLE | InnoDB |
| func                      | BASE TABLE | InnoDB |
| general_log               | BASE TABLE | CSV    |
| global_grants             | BASE TABLE | InnoDB |
| gtid_executed             | BASE TABLE | InnoDB |
| help_category             | BASE TABLE | InnoDB |
| help_keyword              | BASE TABLE | InnoDB |
| help_relation             | BASE TABLE | InnoDB |
| help_topic                | BASE TABLE | InnoDB |
| innodb_index_stats        | BASE TABLE | InnoDB |
| innodb_table_stats        | BASE TABLE | InnoDB |
| password_history          | BASE TABLE | InnoDB |
| plugin                    | BASE TABLE | InnoDB |
| procs_priv                | BASE TABLE | InnoDB |
| proxies_priv              | BASE TABLE | InnoDB |
| role_edges                | BASE TABLE | InnoDB |
| server_cost               | BASE TABLE | InnoDB |
| servers                   | BASE TABLE | InnoDB |
| slave_master_info         | BASE TABLE | InnoDB |
| slave_relay_log_info      | BASE TABLE | InnoDB |
| slave_worker_info         | BASE TABLE | InnoDB |
| slow_log                  | BASE TABLE | CSV    |
| tables_priv               | BASE TABLE | InnoDB |
| time_zone                 | BASE TABLE | InnoDB |
| time_zone_leap_second     | BASE TABLE | InnoDB |
| time_zone_name            | BASE TABLE | InnoDB |
| time_zone_transition      | BASE TABLE | InnoDB |
| time_zone_transition_type | BASE TABLE | InnoDB |
| user                      | BASE TABLE | InnoDB |
+---------------------------+------------+--------+
33 rows in set (0.00 sec)
```

表格 1 mysql库里的表详细说明

| 表名                        | 表中文名         | 表简介                   |
| ------------------------- | ------------ | --------------------- |
| columns_priv              | 列权限          |                       |
| component                 | 组件           | 5.7新增                 |
| db                        | 数据库          |                       |
| default_roles             | 缺省角色         | 5.7新增                 |
| engine_cost               | 引擎开销         |                       |
| event                     | 事件           |                       |
| func                      | 函数           |                       |
| general_log               | 常规日志         |                       |
| global_grants             | 全局授权         | 5.7新增                 |
| gtid_executed             |              | 5.7新增                 |
| help_category             | 帮助分类         |                       |
| help_keyword              | 帮助关键词        |                       |
| help_relation             | 帮助关系         |                       |
| help_topic                | 帮助主题         |                       |
| innodb_index_stats        | innodb引擎索引统计 |                       |
| innodb_table_stats        | innodb表状态    |                       |
| ndb_binlog_index          |              | 5.7删除                 |
| password_history          | 密码历史         | 5.7新增                 |
| plugin                    | 插件           |                       |
| proc                      | 进程           |                       |
| procs_priv                | 进程权限         |                       |
| proxies_priv              | 代理权限         |                       |
| role_edges                |              | 5.7新增                 |
| server_cost               | 服务器开销        | 5.7新增                 |
| servers                   | 服务器          |                       |
| slave_master_info         | 主从信息         |                       |
| slave_relay_log_info      |              |                       |
| slave_worker_info         | 从服务器worker信息 |                       |
| slow_log                  | 慢SQL日志       |                       |
| tables_priv               | 表权限          |                       |
| time_zone                 | 时区           |                       |
| time_zone_leap_second     | 时区闰秒         |                       |
| time_zone_name            | 时区名称         |                       |
| time_zone_transition      | 时区转换         |                       |
| time_zone_transition_type | 时区转换类型       |                       |
| user                      | 用户           | 存储用户名、密码、访问限制、增删改查等权限 |

## 2.3   information_schema 信息

INFORMATION_SCHEMA提供了访问数据库元数据的方式。

元数据是关于数据的数据，如数据库名或表名，列的数据类型，或访问权限等。有些时候用于表述该信息的其他术语包括“数据词典”和“系统目录”。

按表的功能大致可划分为以下类型 (MySQL 8.0)：

* 常规表：49张。
* InnoDB表：28张
* 线程池表：3张分别是[`TP_THREAD_GROUP_STATE`](https://dev.mysql.com/doc/refman/8.0/en/information-schema-tp-thread-group-state-table.html)，[`TP_THREAD_GROUP_STATS`](https://dev.mysql.com/doc/refman/8.0/en/information-schema-tp-thread-group-stats-table.html)，[`TP_THREAD_STATE`](https://dev.mysql.com/doc/refman/8.0/en/information-schema-tp-thread-state-table.html)
* 连接控制表：1张是[`CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS`](https://dev.mysql.com/doc/refman/8.0/en/information-schema-connection-control-failed-login-attempts-table.html)
* 企业防火墙表：2张分别是[`MYSQL_FIREWALL_USERS`](https://dev.mysql.com/doc/refman/8.0/en/information-schema-mysql-firewall-users-table.html)，[`MYSQL_FIREWALL_WHITELIST`](https://dev.mysql.com/doc/refman/8.0/en/information-schema-mysql-firewall-whitelist-table.html)
* SHOW语法扩展（视图）：13张。

**phpmyadmin关闭information_schema显示**

在config.inc.php(有的是config.default.php)中设置这样一句

```php
 $cfg['Servers'][$i]['hide_db'] = 'information_schema';
```

表格 2  information_schema库里表详细说明

| 表名                                    | 表中文名       | 表功能    | 表简介                     |
| ------------------------------------- | ---------- | ------ | ----------------------- |
| CHARACTER_SETS                        | 字符集        | show   | SHOW CHARACTER set;     |
| COLLATIONS                            | 校对，排序规则    | show   | show COLLATIONS;        |
| COLLATION_CHARACTER_SET_APPLICABILITY | 校对字符集设置可用性 |        |                         |
| COLUMNS                               | 列名         |        |                         |
| COLUMN_PRIVILEGES                     | 列权限        |        |                         |
| ENGINES                               | 引擎名        | show   | show ENGINES;           |
| EVENTS                                | 事件名        | show   | show events;            |
| FILES                                 | 文件         |        |                         |
| GLOBAL_STATUS                         | 全局状态       | show   | show status;            |
| GLOBAL_VARIABLES                      | 全局变量       | show   | show variables;         |
| KEY_COLUMN_USAGE                      | 关键列用途      |        |                         |
| OPTIMIZER_TRACE                       | 优化跟踪       |        |                         |
| PARAMETERS                            | 参数         |        |                         |
| PARTITIONS                            | 分区         |        |                         |
| PLUGINS                               | 插件         | show   | SHOW PLUGINS            |
| PROCESSLIST                           | 进程列表       | show   | show processlist;       |
| PROFILING                             | 分析         |        | SQL优化分析                 |
| REFERENTIAL_CONSTRAINTS               | 引用约束       |        |                         |
| ROUTINES                              | 路由         |        |                         |
| SCHEMATA                              | 模式         |        |                         |
| SCHEMA_PRIVILEGES                     | 模式权限       |        |                         |
| SESSION_STATUS                        | 会话状态       | show   | show session STATUS;    |
| SESSION_VARIABLES                     | 会话变量       | show   | show session VARIABLES; |
| STATISTICS                            | 统计         |        |                         |
| TABLES                                | 表          | show   | show TABLES;            |
| TABLESPACES                           | 表空间        |        |                         |
| TABLE_CONSTRAINTS                     | 表约束/一致性    |        |                         |
| TABLE_PRIVILEGES                      | 表权限        |        |                         |
| TRIGGERS                              | 触发器        | show   | SHOW TRIGGERS;          |
| USER_PRIVILEGES                       | 用户权限       |        |                         |
| VIEWS                                 | 视图         |        |                         |
| INNODB_LOCKS                          | INNODB锁    | INNODB |                         |
| INNODB_TRX                            |            |        |                         |
| INNODB_SYS_DATAFILES                  |            |        |                         |
| INNODB_LOCK_WAITS                     | INNODB锁等待  |        |                         |
| INNODB_SYS_TABLESTATS                 |            |        |                         |
| INNODB_CMP                            | INNODB校对   |        |                         |
| INNODB_METRICS                        | INNODB指标   |        |                         |
| INNODB_CMP_RESET                      |            |        |                         |
| INNODB_CMP_PER_INDEX                  |            |        |                         |
| INNODB_CMPMEM_RESET                   |            |        |                         |
| INNODB_FT_DELETED                     |            |        |                         |
| INNODB_BUFFER_PAGE_LRU                |            |        |                         |
| INNODB_SYS_FOREIGN                    |            |        |                         |
| INNODB_SYS_COLUMNS                    |            |        |                         |
| INNODB_SYS_INDEXES                    |            |        |                         |
| INNODB_FT_DEFAULT_STOPWORD            |            |        |                         |
| INNODB_SYS_FIELDS                     |            |        |                         |
| INNODB_CMP_PER_INDEX_RESET            |            |        |                         |
| INNODB_BUFFER_PAGE                    |            |        |                         |
| INNODB_CMPMEM                         |            |        |                         |
| INNODB_FT_INDEX_TABLE                 |            |        |                         |
| INNODB_FT_BEING_DELETED               |            |        |                         |
| INNODB_SYS_TABLESPACES                |            |        |                         |
| INNODB_FT_INDEX_CACHE                 |            |        |                         |
| INNODB_SYS_FOREIGN_COLS               |            |        |                         |
| INNODB_SYS_TABLES                     |            |        |                         |
| INNODB_BUFFER_POOL_STATS              |            |        |                         |
| INNODB_FT_CONFIG                      |            |        |                         |

information_schema数据库的表数据通常支持 show 表名 语法，有下面二种情形：

    * 全局： 如show database, status, variables, processlist;
    * 数据库级： 要先指定数据库，如tables, events。

show示例：下例show PROCESSLIST 和 select语句的显示结果是一样的。

```sql
mysql> show PROCESSLIST;

mysql> select * from information_schema.PROCESSLIST;
+----+-----------------+-----------------+--------------------+---------+--------+------------------------+---------------------------+
| ID | USER            | HOST            | DB                 | COMMAND | TIME   | STATE                  | INFO                      |
+----+-----------------+-----------------+--------------------+---------+--------+------------------------+---------------------------+
| 56 | root            | localhost:40762 | superset_1.0       | Sleep   |   3768 |                        | NULL                      |
| 57 | root            | localhost:40764 | superset_1.0       | Sleep   |   3788 |                        | NULL                      |
| 58 | root            | localhost:40766 | superset_1.0       | Sleep   |   3778 |                        | NULL                      |
| 66 | root            | localhost       | information_schema | Query   |      0 | executing              | select * from PROCESSLIST |
| 59 | root            | localhost:40768 | superset_1.0       | Sleep   |   3775 |                        | NULL                      |
|  5 | event_scheduler | localhost       | NULL               | Daemon  | 756321 | Waiting on empty queue | NULL                      |
| 55 | root            | localhost:40760 | superset_1.0       | Sleep   |   3771 |                        | NULL                      |
+----+-----------------+-----------------+--------------------+---------+--------+------------------------+---------------------------+
7 rows in set (0.00 sec)
```

## 2.4   performance_schema 性能

MySQL 5.5开始新增一个数据库：PERFORMANCE_SCHEMA，主要用于收集数据库服务器性能参数。如

①提供进程等待的详细信息，包括锁、互斥变量、文件信息；

②保存历史的事件汇总信息，为提供MySQL服务器性能做出详细的判断；

③对于新增和删除监控事件点都非常容易，并可以改变mysql服务器的监控周期，例如（CYCLE、MICROSECOND）。通过该库得到数据库运行的统计信息，更好分析定位问题和完善监控信息。

表的存储引擎均为PERFORMANCE_SCHEMA，而用户是不能创建存储引擎为PERFORMANCE_SCHEMA的表。MySQL5.5默认是关闭的，需要手动开启，在配置文件里添加：

```ini
[mysqld]
performance_schema=ON
```

查看是否开启：

```sql
    mysql> SHOW VARIABLES LIKE 'performance_schema';

   +--------------------+-------+
   | Variable_name    | Value |
   +--------------------+-------+
   | performance_schema | ON    |
   +--------------------+-------+
   1 row in set

   mysql> SHOW VARIABLES LIKE 'perf%';

   +--------------------------------------------------------+-------+
   | Variable_name                          | Value |
   +--------------------------------------------------------+-------+
   | performance_schema                       | ON    |
   | performance_schema_accounts_size               | 100   |
   | performance_schema_digests_size                | 10000 |
   | performance_schema_events_stages_history_long_size   | 10000 |
   | performance_schema_events_stages_history_size      | 10    |
   | performance_schema_events_statements_history_long_size | 10000 |
   | performance_schema_events_statements_history_size    | 10    |
   | performance_schema_events_waits_history_long_size    | 10000 |
   | performance_schema_events_waits_history_size       | 10    |
   | performance_schema_hosts_size                | 100   |
   | performance_schema_max_cond_classes            | 80    |
   | performance_schema_max_cond_instances            | 3504  |
   | performance_schema_max_file_classes            | 50    |
   | performance_schema_max_file_handles            | 32768 |
   | performance_schema_max_file_instances            | 7693  |
   | performance_schema_max_mutex_classes             | 200   |
   | performance_schema_max_mutex_instances           | 15906 |
   | performance_schema_max_rwlock_classes            | 40    |
   | performance_schema_max_rwlock_instances          | 9102  |
   | performance_schema_max_socket_classes            | 10    |
   | performance_schema_max_socket_instances          | 322   |
   | performance_schema_max_stage_classes             | 150   |
   | performance_schema_max_statement_classes         | 168   |
   | performance_schema_max_table_handles             | 4000  |
   | performance_schema_max_table_instances           | 12500 |
   | performance_schema_max_thread_classes            | 50    |
   | performance_schema_max_thread_instances          | 402   |
   | performance_schema_session_connect_attrs_size      | 512   |
   | performance_schema_setup_actors_size             | 100   |
   | performance_schema_setup_objects_size            | 100   |
   | performance_schema_users_size                | 100   |
   +--------------------------------------------------------+-------+
   31 rows in set
```

### 2.4.1  表详述

```sql
mysql> show tables from performance_schema;

+------------------------------------------------------+
105 rows in set (0.00 sec)
```

表格  performance_schema数据库里的表详述

| 类别               | 表名                                                 | 表简述                                                                        |
| ---------------- | -------------------------------------------------- | -------------------------------------------------------------------------- |
| connection       | accounts                                           | 账号                                                                         |
|                  | threads                                            | 线程                                                                         |
|                  | users                                              | 用户                                                                         |
| instance         | cond_instances                                     | 条件等待对象实例                                                                   |
|                  | mutex_instances                                    |                                                                            |
|                  | rwlock_instances                                   |                                                                            |
|                  | file_instances                                     |                                                                            |
| summary          | events_stages_current                              |                                                                            |
|                  | events_stages_history                              |                                                                            |
|                  | events_stages_history_long                         |                                                                            |
|                  | events_stages_summary_by_account_by_event_name     |                                                                            |
|                  | events_stages_summary_by_host_by_event_name        |                                                                            |
|                  | events_stages_summary_by_thread_by_event_name      |                                                                            |
|                  | events_stages_summary_by_user_by_event_name        |                                                                            |
|                  | events_stages_summary_global_by_event_name         |                                                                            |
| event_statements | events_statements_current                          | 通过 thread_id+event_id可以唯一确定一条记录。                                           |
|                  | events_statements_history                          |                                                                            |
|                  | events_statements_history_long                     |                                                                            |
|                  | events_statements_summary_by_account_by_event_name |                                                                            |
|                  | events_statements_summary_by_digest                |                                                                            |
|                  | events_statements_summary_by_host_by_event_name    |                                                                            |
|                  | events_statements_summary_by_thread_by_event_name  |                                                                            |
|                  | events_statements_summary_by_user_by_event_name    |                                                                            |
|                  | events_statements_summary_global_by_event_name     |                                                                            |
| event_wait       | events_waits_current                               | 记录了当前线程等待的事件                                                               |
|                  | events_waits_history                               | 记录了每个线程最近等待的10个事件                                                          |
|                  | events_waits_history_long                          | 记录了最近所有线程产生的10000个事件                                                       |
|                  | events_waits_summary_by_account_by_event_name      |                                                                            |
|                  | events_waits_summary_by_host_by_event_name         |                                                                            |
|                  | events_waits_summary_by_instance                   |                                                                            |
|                  | events_waits_summary_by_thread_by_event_name       | 按每个线程和事件来统计，thread_id+event_name唯一确定一条记录。                                  |
|                  | events_waits_summary_by_user_by_event_name         |                                                                            |
|                  | events_waits_summary_global_by_event_name          | 按等待事件类型聚合，每个事件一条记录                                                         |
|                  | file_summary_by_event_name                         |                                                                            |
|                  | file_summary_by_instance                           |                                                                            |
|                  | host_cache                                         |                                                                            |
|                  | hosts                                              |                                                                            |
|                  | objects_summary_global_by_type                     |                                                                            |
|                  | performance_timers                                 | 系统支持的统计时间单位                                                                |
|                  | session_account_connect_attrs                      |                                                                            |
|                  | session_connect_attrs                              |                                                                            |
| setup            | setup_actors                                       | 配置用户纬度的监控，默认监控所有用户。                                                        |
|                  | setup_consumers                                    | 配置events的消费者类型，即收集的events写入到哪些统计表中。                                        |
|                  | setup_instruments                                  | 配置具体的instrument，主要包含4大类：idle、stage/xxx、statement/xxx、wait/xxx：             |
|                  | setup_objects                                      | 配置监控对象，默认对mysql，performance_schema和information_schema中的表都不监控，而其它DB的所有表都监控。 |
|                  | setup_timers                                       | 配置每种类型指令的统计时间单位。                                                           |
|                  | socket_instances                                   |                                                                            |
|                  | socket_summary_by_event_name                       |                                                                            |
|                  | socket_summary_by_instance                         |                                                                            |
|                  | table_io_waits_summary_by_index_usage              |                                                                            |
|                  | table_io_waits_summary_by_table                    |                                                                            |
|                  | table_lock_waits_summary_by_table                  |                                                                            |

备注：1. 大致可分类为setup 启动时配置、summary统计表、instance实例、envet_wait事件等待等等。

2. setup开头的为配置表，有5张。

### 2.4.2  应用场景

1. 哪个SQL执行最多：

```sql
>SELECT SCHEMA_NAME,DIGEST_TEXT,COUNT_STAR,SUM_ROWS_SENT,SUM_ROWS_EXAMINED,FIRST_SEEN,LAST_SEEN
FROM events_statements_summary_by_digest
ORDER BY COUNT_STAR desc LIMIT 1;
```

2. 哪个SQL平均响应时间最多：

```sql
>SELECT SCHEMA_NAME,DIGEST_TEXT,COUNT_STAR,AVG_TIMER_WAIT,SUM_ROWS_SENT,SUM_ROWS_EXAMINED,FIRST_SEEN,LAST_SEEN FROM events_statements_summary_by_digest ORDER BY AVG_TIMER_WAIT desc LIMIT 1；
```

3. 哪个SQL扫描的行数最多：

`SUM_ROWS_EXAMINED`

4. 哪个SQL使用的临时表最多：

`SUM_CREATED_TMP_DISK_TABLES、SUM_CREATED_TMP_TABLES`

5. 哪个SQL返回的结果集最多：

SUM_ROWS_SENT

6. 哪个SQL排序数最多：

SUM_SORT_ROWS

## 2.5 sys 系统配置

[sys数据库](https://dev.mysql.com/doc/refman/8.0/en/sys-schema.html)对外显示通常只有一张表sys_config

```sql
mysql> select * from sys.sys_config;
+--------------------------------------+-------+---------------------+--------+
| variable                             | value | set_time            | set_by |
+--------------------------------------+-------+---------------------+--------+
| diagnostics.allow_i_s_tables         | OFF   | 2021-07-28 03:18:32 | NULL   |
| diagnostics.include_raw              | OFF   | 2021-07-28 03:18:32 | NULL   |
| ps_thread_trx_info.max_length        | 65535 | 2021-07-28 03:18:32 | NULL   |
| statement_performance_analyzer.limit | 100   | 2021-07-28 03:18:32 | NULL   |
| statement_performance_analyzer.view  | NULL  | 2021-07-28 03:18:32 | NULL   |
| statement_truncate_len               | 64    | 2021-07-28 03:18:32 | NULL   |
+--------------------------------------+-------+---------------------+--------+
6 rows in set (0.01 sec)
```

<br>

## 本章参考

[1].  https://dev.mysql.com/doc/refman/8.0/en/

[2]. https://dev.mysql.com/doc/refman/8.0/en/information-schema.html

[3]. https://dev.mysql.com/doc/refman/8.0/en/performance-schema.html

[4]. https://dev.mysql.com/doc/refman/8.0/en/sys-schema.html

[5]. MySQL5.6 PERFORMANCE_SCHEMA 说明 https://www.cnblogs.com/zhoujinyi/p/5236705.html

<br>

# 3 PostgreSQL

## 3.1  系统表

系统表是PostgreSQL数据库存放结构元数据的地方，他在PostgreSQL中表现为存放有系统信息的普通表或者视图（用户可以删除，重建）。

表格 PG系统目录表

| 目录名                                                                                                                                                                           | 用途                    |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------- |
| [pg_aggregate](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-aggregate.html)                       | 聚集函数                  |
| [pg_am](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-am.html)                                     | 索引访问方法                |
| [pg_amop](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-amop.html)                                 | 访问方法操作符               |
| [pg_amproc](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-amproc.html)                             | 访问方法支持过程              |
| [pg_attrdef](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-attrdef.html)                           | 列默认值                  |
| [pg_attribute](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-attribute.html)                       | 表列("属性")              |
| [pg_authid](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-authid.html)                             | 认证标识符（角色）             |
| [pg_auth_members](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-auth-members.html)                 | 认证标识符成员关系             |
| [pg_cast](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-cast.html)                                 | 转换（数据类型转换）            |
| [pg_class](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-class.html)                               | 表、索引、序列、视图 （"关系"）     |
| [pg_collation](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-collation.html)                       | 排序规则（locale信息）        |
| [pg_constraint](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-constraint.html)                     | 检查约束、唯一约束、主键约束、外键约束   |
| [pg_conversion](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-conversion.html)                     | 编码转换信息                |
| [pg_database](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-database.html)                         | 本数据库集簇中的数据库           |
| [pg_db_role_setting](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-db-role-setting.html)           | 每角色和每数据库的设置           |
| [pg_default_acl](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-default-acl.html)                   | 对象类型的默认权限             |
| [pg_depend](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-depend.html)                             | 数据库对象间的依赖             |
| [pg_description](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-description.html)                   | 数据库对象上的描述或注释          |
| [pg_enum](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-enum.html)                                 | 枚举标签和值定义              |
| [pg_event_trigger](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-event-trigger.html)               | 事件触发器                 |
| [pg_extension](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-extension.html)                       | 已安装扩展                 |
| [pg_foreign_data_wrapper](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-foreign-data-wrapper.html) | 外部数据包装器定义             |
| [pg_foreign_server](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-foreign-server.html)             | 外部服务器定义               |
| [pg_foreign_table](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-foreign-table.html)               | 外部表信息                 |
| [pg_index](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-index.html)                               | 索引信息                  |
| [pg_inherits](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-inherits.html)                         | 表继承层次                 |
| [pg_init_privs](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-init-privs.html)                     | 对象初始特权                |
| [pg_language](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-language.html)                         | 编写函数的语言               |
| [pg_largeobject](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-largeobject.html)                   | 大对象的数据页               |
| [pg_largeobject_metadata](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-largeobject-metadata.html) | 大对象的元数据               |
| [pg_namespace](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-namespace.html)                       | 模式schema，存储命名空间。      |
| [pg_opclass](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-opclass.html)                           | 访问方法操作符类              |
| [pg_operator](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-operator.html)                         | 操作符                   |
| [pg_opfamily](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-opfamily.html)                         | 访问方法操作符族              |
| [pg_pltemplate](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-pltemplate.html)                     | 过程语言的模板数据             |
| [pg_policy](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-policy.html)                             | 行安全策略                 |
| [pg_proc](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-proc.html)                                 | 函数和过程                 |
| [pg_range](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-range.html)                               | 范围类型的信息               |
| [pg_replication_origin](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-replication-origin.html)     | 已注册的复制源               |
| [pg_rewrite](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-rewrite.html)                           | 查询重写规则                |
| [pg_seclabel](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-seclabel.html)                         | 数据库对象上的安全标签           |
| [pg_shdepend](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-shdepend.html)                         | 共享对象上的依赖              |
| [pg_shdescription](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-shdescription.html)               | 共享对象上的注释              |
| [pg_shseclabel](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-shseclabel.html)                     | 共享数据库对象上的安全标签         |
| [pg_statistic](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-statistic.html)                       | 规划器统计                 |
| [pg_tablespace](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-tablespace.html)                     | 本数据库集簇内的表空间           |
| [pg_transform](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-transform.html)                       | 转换（将数据类型转换为过程语言需要的形式） |
| [pg_trigger](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-trigger.html)                           | 触发器                   |
| [pg_ts_config](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-ts-config.html)                       | 文本搜索配置                |
| [pg_ts_config_map](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-ts-config-map.html)               | 文本搜索配置的记号映射           |
| [pg_ts_dict](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-ts-dict.html)                           | 文本搜索字典                |
| [pg_ts_parser](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-ts-parser.html)                       | 文本搜索分析器               |
| [pg_ts_template](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-ts-template.html)                   | 文本搜索模板                |
| [pg_type](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-type.html)                                 | 数据类型                  |
| [pg_user_mapping](mk:@MSITStore:E:\ebook\hot\big_data\bigdata.大数据\DB-DataBase\SQL\PostgreSQL\PostgreSQL9.6.0-CN-v1.0.chm::/html/catalog-pg-user-mapping.html)                 | 将用户映射到外部服务器           |

## 3.2  系统字段

每个表都有几个系统字段，这些字段是由系统隐含定义的。因此，这些名字不能用于用户定义的字段名。请注意这些限制与这个名字是否关键字无关，把名字用引号括起来并不能让你逃离这些限制。你实际上不需要注意这些字段；只要知道它们存在就可以了。

表格  PG的系统字段

| 字段名      | 简介                              | 应用                                                                                                                                                           |
| -------- | ------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| oid      | 行对象标识符(对象ID)。                   | 这个字段只有在创建表的时候使用了WITH OIDS 或者是配置参数[default_with_oids](http://www.cnblogs.com/runtime-config-compatible.html#GUC-DEFAULT-WITH-OIDS)的值为真时出现。这个字段的类型是oid(和字段同名). |
| tableoid | 包含本行的表的OID。                     | 这个字段对那些从继承层次中选取的查询特别有用，因为如果没有它的话，我们就很难说明一行来自哪个独立的表。`tableoid` 可以和`pg_class`的`oid`字段连接起来获取表名字。                                                                |
| xmin     | 插入该行版本的事务标识(事务ID)。              | 一个行版本是一行的一个状态；一行的每次更新都为同一个逻辑行创建一个新的行版本。                                                                                                                      |
| xmax     | 删除事务的标识(事务ID)，如果不是被删除的行版本，那么是零。 | 在一个可见行版本里，这个字段有可能是非零。这通常意味着删除事务还没有提交，或者是一个删除的企图被回滚掉了。                                                                                                        |
| cmin     | 在插入事务内部的命令标识(从零开始)。             |                                                                                                                                                              |
| cmax     | 删除事务内部的命令标识符，或者是零。              |                                                                                                                                                              |
| ctid     | 一个行版本在它所处的表内的物理位置，如（物理块号，行号）。   | 尽管`ctid` 可以用于非常快速地定位行版本，但每次`VACUUM FULL`之后，一个行的`ctid`都会被更新或者移动。因此`ctid` 是不能作为长期的行标识符的。应该使用 OID ，或者更好是用户定义的序列号，来标识一个逻辑行。                                      |

<br>

## 本章参考

* http://www.postgres.cn/docs/10/

<br>

# 4 Hadoop生态

## 4.1 HDFS

## 4.2 Hive

## 4.3 HBase

<br>

## 本章参考

<br>

# 5 应用软件

## Superset

详见  《[superset二次开发](superset二次开发.md)》

<br>

# 参考资料
