| 序号 | 修改时间   | 修改内容                                     | 修改人 | 审稿人 |
| ---- | ---------- | -------------------------------------------- | ------ | ------ |
| 1    | 2015-3-18  | 创建。                                       | Keefe  | Keefe  |
| 2    | 2016-6-22  | 更细Excel数据分析及工具                      | 同上   |        |
| 3    | 2016-12-16 | 增加数学概论章节。                           | 同上   |        |
| 4    | 2017-1-5   | 增加R语言和数学公式的图形化章节              | 同上   |        |
| 5    | 2017-6-9   | 增加赌博与概率章节；补充附录~奖项。          | 同上   |        |
| 6    | 2018-9-24  | 增加数学七大猜想。                           | 同上   |        |
| 7    | 2020-3-24  | 更新《深度学习》一书中所涉及到的数学知识     | 同上   |        |
| 8    | 2023-6-10  | 数字工具、应用实践章节从《数字体系》拆分成文 | 同上   |        |

<br><br><br>

---

# 目录

[TOC]



[5    数学建模和数学工具... 29](#_Toc35981719)

[5.1    数值拟合（数值逼近）... 29](#_Toc35981720)

[5.2    Mathematica. 30](#_Toc35981721)

[5.3    Lindo. 30](#_Toc35981722)

[5.4    Office Excel（作数据分析）... 30](#_Toc35981723)

[5.4.1     EXCEL数据分析工具的加载（宏）... 30](#_Toc35981724)

[5.4.2     分析1：假设分析（假设检验）... 32](#_Toc35981725)

[5.4.3     分析2：线性回归分析... 36](#_Toc35981726)

[5.4.4     分析3：计算相关系数... 37](#_Toc35981727)

[5.4.5     分析4：统计分析... 38](#_Toc35981728)

[5.4.6     分析5：曲线拟合之线性/指数/多项式... 38](#_Toc35981729)

[5.4.7     EXCEL使用小技巧... 39](#_Toc35981730)

[5.5    Stata. 40](#_Toc35981731)

[5.6    本章参考... 40](#_Toc35981732)

[6    数学的实践（应用篇）... 40](#_Toc35981733)

[6.1    生活中的数学... 40](#_Toc35981734)

[6.2    数学公式的图形化... 41](#_Toc35981735)

[6.2.1     基本初等函数... 41](#_Toc35981736)

[6.2.2     概率分布的曲线... 44](#_Toc35981737)

[6.3    如何形象地的理解数学概念（先验的、直觉）... 46](#_Toc35981738)

[6.3.1     极限和连续性的精准定义... 46](#_Toc35981739)

[6.4    赌博与概率... 47](#_Toc35981740)

[6.4.1     彩票... 47](#_Toc35981741)

[6.4.2     稳赚不赔的赌场... 47](#_Toc35981742)

[6.4.3     抛硬币的游戏（凯利公式）... 48](#_Toc35981743)

[6.4.4     大话骰... 49](#_Toc35981744)

[6.4.5     简易小赌博... 50](#_Toc35981745)

[6.5    本章参考... 51](#_Toc35981746)



<br>

---



# 1  数学建模

## 数值拟合（数值逼近）

首先对两组数据进行相关性分析，然后再进行线性拟合。

研究类似的多个变量之间的关系。这种关系可分为两大类，即相关关系与回归关系。

**相关关系** ：两变量 X ， Y 均为随机变量，任一变量的每一可能值都有另一变量的一个确定分布与之对应。

**回归关系** ： X 是非随机变量或随机变量， Y 是随机变量，对 X 的每一确定值 x i 都有 Y 的一个确定分布与之对应。

​    从上述定义可看出相关关系中的两个变量地位是对称的，可以认为它们互为因果；而回归关系中则不是这样，我们常称回归关系中的 X 是自变量，而 Y 是因变量。即把 X 视为原因，而把 Y 视为结果。

​    这两种关系尽管有意义上的不同，分析所用的数学概念与推导过程也有所不同，但如果我们使用共同的标准即使 y 的残差平方和最小（最小二乘法，详见下述），则不管是回归关系还是相关关系都可以得到相同的参数估计式。

回归分析和相关分析的目的也有所不同。回归分析研究的重点是建立 X 与 Y 之间的数学关系式，这种关系式常常用于**预测**，即知道一个新的 X 取值，然后预测在此情况下的 Y 的取值；而相关分析的重点则放在研究 X 与 Y 两个随机变量之间的共同变化规律，例如当 X 增大时 Y 如何变化，以及这种共变关系的强弱。

从两个变量间相关（或回归）的程度来看，可分为以下三种情况：

（ 1 ） 完全相关 。此时一个变量的值确定后，另一个变量的值就可通过某种公式求出来；即一个变量的值可由另一个变量所完全决定。这种情况在生物学研究中是不太多见的。

 （ 2 ） 不相关 。变量之间完全没有任何关系。此时知道一个变量的值不能提供有关另一个变量的任何信息。

 （ 3 ） 统计相关 （不完全相关）。介于上述两种情况之间。也就是说，知道一个变量的值通过某种公式就可以提供关于另一个变量一些信息，通常情况下是提供有关另一个变量的均值的信息。此时知道一个变量的取值并不能完全决定另一个变量的取值，但可或多或少地决定它的分布。这是科研中最常遇到的情况。本章讨论主要针对这种情况进行。为简化数学推导，本章中如无特别说明，一律假设 X 为非随机变量，即 X 只是一般数字，并不包含有随机误差。但所得结果可以推广到 X 为随机变量的情况。

所谓一元线性回归，就是假定X与 之间的关系是线性关系，而且满足：

Y(x=xi)= a+bx

此时进行回归分析的目标就是给出参数 α和β的估计值。

## 本章参考

<br><br>

# 2 数学工具

## 2.1  Office Excel（数据分析）

**Excel 2007数据分析主要功能**：

* 导入外部数据源：文本或数据库或网页等等（可进行数据分割）
* 数据预处理：删除重复项、数据有效性、数据过滤（数值、日期、文本和其它）
* 对数据调用公式：如统计、财务、数学和三角函数等。
* 数据统计和排序：求和、最大、最小、平均、众数、中位数、方差和标准差
* 数据分析：假设分析（方案、单变量和数据表）、线性分性等等。
* 数据作图：拆线图、饼图、柱形图、条形图、面积图、散点图、股价图等。
* 数据透视图：进行分类同列
* 常用小技巧：冻结窗口（不移动指定行列）、

财务函数：（注：函数里的pv/fv需要负数）

| [FV](http://support.office.microsoft.com/client/FV-e423af31-5a77-4a1e-837b-bc91e4be7898)   | 返回一笔投资的未来值     |
| ------------------------------------------------------------------------------------------ | -------------- |
| [PV](http://support.office.microsoft.com/client/PV-74801ef4-d79b-4e35-84b9-43bdc1730a28)   | 返回投资的现值        |
| [PMT](http://support.office.microsoft.com/client/PMT-42bacbbd-9258-44b9-846d-966901ef1ac7) | 返回年金的定期支付金额如贷款 |

### EXCEL数据分析工具的加载（宏）

下面以[Excel](http://www.itongji.cn/analysis/Excel/)2007为例，介绍数据分析功能的查找路径，[Excel](http://www.itongji.cn/analysis/Excel/)2010或2013与之类似。

数据分析工具是在安装 Microsoft Office 或 Excel 后可用的 Microsoft Office Excel 加载项 （加载项：为 Microsoft Office 提供自定义命令或自定义功能的补充程序。）程序。但是，要在 Excel 中使用它，你需要先进行加载。

* 加载宏是一种可选择性地安装到计算机中的软件组件，用户可根据需要决定是否安装。其作用是为 Excel 添加命令和函数，扩充Excel的功能。

* Excel加载宏的扩展名是.xla或.xll。

在默认情况下，Excel将下表列出的加载宏程序安装在如下某一磁盘位置：“Microsoft Office\Office”文件夹下的“Library”文件夹或其子文件夹，或 Windows 所在文件夹下的“Profiles\用户名\Application Data\Microsoft\AddIns”文件夹下。网络管理员也可将加载宏程序安装到其他位置。

**具体操作步骤如下**：

1、单击“Microsoft Office 按钮” ，然后单击“Excel 选项”。

2、单击“加载项”，然后在“管理”框中，选择“Excel 加载宏”，单击“转到”。

3、在“可用加载宏”框中，选中“分析工具库”复选框，然后单击“确定”。

提示：如果“可用加载宏”框中未列出“分析工具库”，请单击“浏览”以找到它。

如果系统提示计算机当前未安装分析工具库，请单击“是”以安装它。

 ![image-20200502115533547](../media/science/math_excel_001.png)

4、OK

加载分析工具库之后，“数据分析”命令将出现在“数据”选项卡上的“分析”组中。

表格 14 Excel内置加载宏

| 加   载 宏                 | 描    述                                                      |
| ----------------------- | ----------------------------------------------------------- |
| 分析工具库                   | 添加财务、统计和工程分析工具和函数                                           |
| 条件求和向导                  | 对于数据清单中满足指定条件的数据进行求和计算                                      |
| 欧元工具                    | 将数值的格式设置为欧元的格式，并提供EUROCONVERT函数以用于转换货币                      |
| 查阅向导                    | 创建一个公式，通过数据清单中的已知值查找所需数据                                    |
| ODBC 加载宏                | 利用安装的 ODBC 驱动程序，通过开放式数据库互连（ODBC）功能与外部数据源相连                  |
| 报告管理器                   | 为工作簿创建含有不同打印区域、自定义视面以及方案的报告                                 |
| 规划求解                    | 对基于可变单元格和条件单元格的假设分析方案进行求解计算                                 |
| 模板工具                    | 提供 Excel 的内置模板所使用的工具。使用内置模板时就可自动访问这些工具                      |
| Internet  Assistant VBA | 通过使用 Excel 97 Internet Assistant 语法，开发者可将 Excel 数据发布到 Web 上 |

表格 15 Excel分析工具库中的工具

| 分析工具名称 | 说    明                                           |
| ------ | ------------------------------------------------ |
| 方差分析   | 包括3种类型的分析，它们是单因素方差分析、可重复双因素分析、无重复双因素分析           |
| 相关系数分析 | 用于判断两组数据集（可以使用不同的度量单位）之间的关系。                     |
| 协方差分析  | 用于返回各数据点的一对均值偏差之间的乘积的平均值。                        |
| 描述统计分析 | 用于生成对输入区域中数据的单变值分析，提供有关数据趋中性和易变性的信息              |
| 指数平滑分析 | 基于前期预测值导出相应的新预测值，并修正前期预测值的误差。                    |
| 傅里叶分析  | 解决线性系统问题，并能通过快速傅里叶变换（FFT）分析周期性的数据。               |
| F-检验   | 用来比较两个样本总体的方差                                    |
| 直方图分析  | 在给定工作表中数据单元格区域和接收区间的情况下，计算数据的个别和累计频率             |
| 移动平均分析 | 基于特定的过去某段时期中变量的均值，对未来值进行预测                       |
| t-检验分析 | 提供3种不同检验：双样本等方差假设t-检验，双样本异方差假设t-检验，平均值的成对双样本t-检验 |
| 回归分析   | 通过对一组观察值使用“最小二乘法”直线拟合，进行线形回归分析。                  |
| 抽样分析   | 以输入区域为总体构造总体的一个样本                                |
| z-检验   | 双样本平均差检验                                         |

**说明**：Excel的分析工具库中提供了大量非常实用的分析工具。

* 数据审核和跟踪分析可以查找单元格或公式中的数据来源，并可由此分析产生错误的根源。
* 数据的有效性检验工具可以把单元格中的数据输入或数据值限制在一个有效的范围内，以减少错误数据的产生。
* 模拟运算和单变量求解分析两个变量之间的因果关系是一个较佳的工具。
* 线形规划工具可用于求解人员分配、生产计划、公路运输及生产、投资等的最佳方案。
* 统计分析、假设检验及回归分析在数理统计、经济分析等领域有着较强的应用价值，它们为许多复杂问题的解决提供了一些有用的模型和解决方案。

### 分析实例

**分析1：假设分析（假设检验）**

假设分析是在单元格中更改值以查看这些更改将如何影响工作表中公式结果的过程。

Excel 附带了三种假设分析工具：方案、**数据表**和**单变量求解**。

方案和数据表可获取一组输入值并确定可能的结果。数据表仅可以处理一个或两个变量，但可以接受这些变量的众多不同的值。一个方案可具有多个变量，但它最多只能容纳 32 个值。

单变量求解与方案和数据表的工作方式不同，它获取结果并确定生成该结果的可能的输入值。

**假设分析能为我们做什么**？

1） 单变量求解：已知公式 y=(6x+16)/50-60, y=102时，x=?，诸如此类已知函数结果，求自变量的问题？（提示：目标单元格是一个数学模型/公式，目标值是y=102，可变单元格是需要等待改变的数据即题中x，最后结果出现在可变单元格）

 ![image-20200502115607165](../media/science/math_excel_002.png)

2） 数据表（单变量）：已知 y=(6x+16)/50-60，分析x,变量在不同数值下，y值 如何变化？

3） 数据表（双变量）：已知 z=(6x+y)/50-60，分析x,y两个变量在不同数值下，z 值如何变化？（提示：C1-F5是数据区域，其中行数据是x，列数据是y，行列交叉处c1就是z的公式，空白处就是求得x、y不同时的z值）

 ![image-20200502115714345](../media/science/math_excel_003.png)

4）方案：

假设您具有三个预算方案：最坏情况、一般情况、最好情况。您可以使用方案管理器在同一工作表中创建这三个方案，

然后在各方案间切换。对于每个方案，您可以指定更改单元格以及用于该方案的值。当您在各方案之间切换时，

结果单元格会发生变化以反映变化的不同单元格值。

**双变量模拟运算表**

**示例1：求在不同的分期付款期数（月）和不同的月分期付款手续费率，每期（月）消费者需要付款的金额**

即：改变期数（月）和分期手续费率，求最终每期（月）付款金额。

**步骤1**：创建工作表。

建立基本的运算工作表，输入必要的数据及要测试的工作表中的数据。

**步骤2：创建运算公式**

双变量模拟运算中首先要在行、列交叉处所在的单元格输入运算公式。在本例中，在分期付款期数和月分期付款手续费率的交叉处，即D3单元格中输入公式 **“=PMT(B5,B7,B2)”****，**运算结果如图所示。

 ![image-20200502115824117](../media/science/math_excel_004.png)

**步骤3：建立双变量模拟运算表**

首先要选定公式、数值序列和模拟运算结果所在的单元格区域，即D3:J13，以定义这个模拟运算表，然后选择“数据”菜单中的“模拟运算表”命令，打开“模拟运算表”对话框，在“输入引用行的单元格”中输入月分期手续费率所在的单元格“$B$5”，在“输入引用列的单元格”中输入分期付款期数所在的单元格“$B$7”，如图所示。最后单击“模拟运算表”对话框的“确定”按钮。

 ![image-20200502115845633](../media/science/math_excel_005.png)

最终计算结果如下：

 ![image-20200502115907682](../media/science/math_excel_006.png)

说明：给的数据中，收益最好的是F5=42.33%（9年4%的年利率）。

**示例2：投资改变年收益率和时间，求最终收益率。**

 ![image-20200502115933725](../media/science/math_excel_007.png)

计算结果如下：

 ![image-20200502115948532](../media/science/math_excel_008.png)

说明：给的数据中，收益最好的是F5=42.33%（9年4%的年利率）。

**分析2：线性回归分析**

**1、概述**

  EXCEL提供的规划求解工具，可求解出线性与非线性两种规划求解问题，规划求解问题常用于解决产品比例、人员调度、优化路线、调配材料等方面问题。

**2、规划求解问题的特点**：

* 问题有单一的目标，如求运输的最佳路线、求生产的最低成本、求产品的最大盈利，求产品周期的最短时间等。
* 问题有明确的不等式约束条件，例如生产材料不能超过库存，生产周期不能超过一个星期等。
* 问题有直接或间接影响约束条件的一组输入值。

**3、Excel规划求解问题的组成部分**

（1）一个或一组可变单元格

 可变单元格称为决策变量，一组决策变量代表一个规划求解的方案

（2）目标函数

目标函数表示规划求解要达到的最终目标，是规划求解的关键。它是规划求解中可变量的函数

（3）约束条件

约束条件是实现目标的限制条件。

   意义：通过规划求解，用户可为工作表的目标单元格中的公式找到一个优化值，规划求解将直接或间接与目标单元格公式相联系的一组单元格数值进行调整，最终在目标单元格公式中求得期望的结果。

**例1**：

**求解不等式：[见[**ch7**](第7章教学资料/ch7.xls)**.xls—规划求解不等式]

某工厂生产甲、乙两种产品，假设生产甲产品1吨，要消耗9吨煤，4千瓦电力，3吨钢材，获利0.7万元；生产乙产品1吨，要消耗4吨煤，5千瓦电力，10吨钢材，获利1.2万元。按计划国家能提供给该厂的煤为360吨，电力200千瓦，钢材300吨，问应该生产多少吨甲种产品和乙种产品，才能获得最大利润？

  假设生产甲种产品X1吨，生产乙种产品x2吨，

  **其最大利润是求=0.7x1+1.2x2****的最大值。这个问题可用数学建模如下：
$$
\begin{cases}9x_1+4x_2<=360 \\ 4x_1+5x_2<=200 \\ 3x_1+10x_2<=300 \\   x_1>=0,x_2>=0......
\end{cases}
$$

**规划求解如下**：

* B3和C3分别用于保存甲和乙产品的生产量。
* 目标单元格为B8；可变单元格为$B$3:$C$3；约束条件为：
* $B$3>=0
* $C$3>=0
* $B$4<=360
* $B$5<=200
* $B$6<=300

**规划求解第一步——**建立求解工作表(输入原始数据及相应的各公式)

**规划求解第二步——设置求解参数**

* 选择“工具” —“规划求解”菜单，设置以下求解的各项参数：
* 设置目标单元格：输入目标函数所在单元格(为总余额单元格)
* 设置目标：最大值、最小值或值的数值(最大利润,即最大值)
* 设置可变单元格：它的确定决定结果（为生产数量）
* 设置约束条件：单击“添加”按钮—输入约束条件—按添加—依次输入所有约束条件—确定

**规划求解第3步——保存求解结果**

在规划求解对话框中按“求解”—在规划求解结果对话框中按“保存规划求解结果”

**分析3：计算相关系数**

**操作步骤**

1.打开原始数据表格，制作本实例的原始数据需要满足两组或两组以上的数据，结果将给出其中任意两项的相关系数。

2.选择“工具”-“数据分析”-“描述统计”后，出现属性设置框，依次选择:

输入区域:选择数据区域，注意需要满足至少两组数据。如果有数据标志，

注意同时勾选下方“标志位于第一行”；

分组方式:指示输入区域中的数据是按行还是按列考虑，请根据原数据格式选择；

输出区域能选择本表、新工作表组或是新工作簿；

3.点击“确定”即可看到生成的报表。

**分析4：统计分析**

Excel的分析工具库提供了3种统计观测分析工具：指数平滑分析、移动平均分析和回归分析。

**分析5：曲线拟合之线性/指数/多项式**

1) 把实验数据输入excel中，两个变量的最好做成两个竖排。选中所有数据，注意不要把文字也选上了。

2) 在菜单栏中点“插入”，然后选择“散点图”下面的下拉菜单。

3) 从菜单中选择自己需要的类型，一般选择既有数据点，又有平滑曲线的散点图。就能得到平滑曲线。

4) 点击一个点，会选中所有数据点，然后点右键，在弹出的菜单中选择“添加趋势线”。 在这里可以选择需要你和的曲线类型，如线性，指数，幂，对数，多项式。。选择多项式。再把下面的“显示公式”，“显示R平方”的复选框里打√，就能得到需要的曲线，公式，和相对误差。(**相对误差**的值在0~1，值越大拟合越合理)

### EXCEL使用小技巧

* 图表混合：如柱形和拆线图的混合

* 选择性粘贴：应用例子如行列转置、对行列进行四则运算、单元格文本转化成数字

* 表格冻结：当行或者列太长时，可指定首几行或列不动，便以浏览。

* 删除尾部多余空行：法1：指定列过滤，选择空白，将过滤后的空行隐藏；法2：选择要删除的空行起始行，按ctrl+shift+向下箭头，右键“删除”。
1) 柱线图和折线（线形）图的混合

首先，选取数据范围。插入，柱形图。
 其次，在图标内，选择要变换成线性的数据，变更图表类型，改成线性。
 然后，看看有没有必要更改坐标，必要的话把线形图的坐标改成次坐标轴

**2)** 建立分类下拉列表填充项

要将企业的名称输入到表格中，为了保持名称的一致性，利用“数据有效性”功能建了一个分类下拉列表。

3) 行列转置（**也可以对整行整列数据进行四则运算**）

  首先选中数据区域(即需要实现行列转置的数据区域)，然后点右键，执行“复制”；

 其次选择一个没有数据的区域单元格(这里是放新数据的地方)，点右键，执行“选择性粘贴”，这个时候，会弹出如下的对话框。

 只需要在“选择性粘贴”对话框中把“**转置**”前面的复选框√选就行了，之后点击确定。

**拓展**：选择某个数据复制，然后选中区域单元格右键“选择性粘贴“，勾选相应的四则运算符，即可得到四则运算后的新数据。“选择性粘贴”功能也可将单元格文本转换成数字，便以排序。过程是：将上述某个数据改为空行，然后选择性粘贴过程同样。

4) 指定行列不移动

把鼠标放在需要冻结的行列下面一行，选择视图－冻结窗格。这个功能在数据量多的时候很有用。

<br>

## 2.2  Python

依赖库：scipy

### 排列组合问题

```python
In [2]: from scipy.special import perm, comb
In [3]: print(perm(3,2), comb(3,2))
(6.0, 3.0)

In [7]: from itertools import permutations, combinations
In [8]: list(permutations(['a','b','c'],2))
Out[8]: [('a', 'b'), ('a', 'c'), ('b', 'a'), ('b', 'c'), ('c', 'a'), ('c', 'b')]
```

**生日问题**

问题描述：N位客人参加一个聚会，这N位客人中至少有二人生日在同一天的概率p是多少？

公式： 
$$
p=(365^n-365*364...*(365-n+1))/365^n
$$

```python
from functools import reduce

def calc_n(n):
    tn = 365**n
    def multi(x,y): return x*y
    cn=reduce(multi, range(365,365-n, -1))
    return (tn-cn)/tn

In [40]: calc_n(10)
Out[40]: 0.11694817771107766

In [41]: calc_n(20)
Out[41]: 0.41143838358058

In [42]: print(calc_n(30), calc_n(40))
0.7063162427192686 0.891231809817949
```

## 2.3 常用数学工具

### Mathematica

### Lindo

### Stata

<br>

## 本章参考

[1].  用Excel计算相关系数和进行回归分析 http://wenku.baidu.com/view/606c6e67ddccda38376baf53.html?re=view

[2].  Excel假设分析

http://wenku.baidu.com/link?url=ppQ-upYAlZh3-IWrxz7MeSkVTeWhNaibft21ScV8KWrvhKIMzBpCfIyk795GIEFCHJMF2OQkXAuCu3X56_LoiGW8A7u87J6s04h4iW0Xw0G

[3].  excel曲线拟合怎么弄 http://jingyan.baidu.com/article/59a015e3accd13f7948865a9.html

<br><br>

# 3 数学应用

## 3.1  生活中的数学

**数论**：人们最先接触到的数学就是代数学。实数用来计数。从0到有理数，再到无理数的发现过程，是数学学科的一个巨大突破点。数论的发展伴随着三次数学危机的解决。

**平面几何/空间解析几何**：几何是人们最早接触到的数学分支，重要性仅次于代数。计算日常生活中物品面积、体积。在建筑学中广泛使用。16世纪，笛卡尔创立了解析几何（重要标志是引入了坐标X-Y轴），将代数和几何联系起来的。

**数理逻辑**：更多属于逻辑学的范畴，三段论。

## 3.2  数学公式的图形化

### 3.2.1  基本初等函数

* 函数的五个要素：自变量，因变量，定义域，值域，对应法则

* 函数的四种特性：有界限，单调性，奇偶性，周期性

基本初等函数包括幂函数、指数函数、对数函数和8个正反三角函数。

表格 16 基本初等函数列表

| 函数名称          | 定义与公式              | 主要性质                                                     |
| ----------------- | ----------------------- | ------------------------------------------------------------ |
| 幂函数            | $y=x^a(a为实数)$        | 单调性：若a>0,函数在     内单调增加； 若a<0,函数在     内单调减少。 |
| 指数函数          | $y=a^x(a>0, a!=1)$      | 与对数函数互为反函数，图形过（0，1）点。 典型：y=ex  (a=e)   |
| 对数函数          | $y=log_xa$ 或 log(a, x) | 与指数函数互为反函数，图形过（1，0）点  。<br>典型：log(10, x)=lgx,  log(e, x)=Inx |
| 正弦/余弦三角函数 | y=sin(x) / y=cos(x)     |                                                              |
| 正切/余切三角函数 | y=tg(x) / y=ctg(x)      |                                                              |
| 反正弦/反余弦     | y=arcsin(x) / arccos    |                                                              |
| 反正切/反余切     | y=arctan(x)  /          |                                                              |

备注：指数函数和对数函数互为反函数。

1）幂函数    $y=x^a (a为实数) $

  .![image-20200502124125385](../media/science/math_010.png)

![image-20200502124517741](../media/science/math_011.png)

2）指数函数   $y=a^x (a>=0, a!=1)$

主要性质：与对数函数互为反函数，图形过（0，1）点，直线y=0为函数图形的水平渐近线。

**典型**：

 ![image-20200502124533401](../media/science/math_012.png)

3）对数函数   $y=\log_xa$

主要性质：与指数函数互为反函数，图形过（1，0）点，直线x=0为函数图形的铅直渐近线。

**典型**：   e=2.7182……，无理数 经常用到以e为底的对数

   ![image-20200502124549377](../media/science/math_013.png)

4）三角函数、反三角函数

三角函数包括正弦（图1-19(a)）、余弦（图1-19(b)）、正切（图1-20(a)）、余切（图1-20(b)）。

反三角函数包括反正弦（图1-21）、反余弦、反正切（图1-22）、反余切。

 ![image-20200502124603210](../media/science/math_014.png)

![image-20200502125049221](../media/science/math_015.png)

![image-20200502124735937](../media/science/math_016.png)

![image-20200502124753971](../media/science/math_017.png)

### 3.2.2  概率分布的曲线

表格 17 概率分布的曲线及其数据特征列表

| 分布曲线   | 分布曲线                                                      | 图形特点                               | 性质/数据特点                                     | 应用示例                     |
| ------ | --------------------------------------------------------- | ---------------------------------- | ------------------------------------------- | ------------------------ |
| 二项分布   | ![image-20200502125119056](../media/science/math_020.png) |                                    | 当n=1时，二项分布就是伯努利分布。                          |                          |
| 正态分布   | ![image-20200502125150377](../media/science/math_021.png) | 正态曲线呈钟型(也叫钟形曲线)，<br>两头低，中间高，左右对称，。 | 在平均数两侧呈对称分布，即大部分集中在平均数附近。<br>N（μ平均数, σ标准差）。 | 比如年龄分布。                  |
| 标准正态分布 | ![image-20200502125222695](../media/science/math_022.png) | 又叫μ分布，对称轴为Y轴。平均数为0，标准为1            | N(μ，σ^2)=N(0, 1)                            | 家畜的体长、体重、产奶量             |
| 指数分布   | ![image-20200502125242005](../media/science/math_023.png) |                                    | 可以用来表示独立随机事件发生的时间间隔。                        | 旅客进机场的时间间隔               |
| t分布    | ![image-20200502125257171](../media/science/math_024.png) |                                    |                                             |                          |
| 几何分布   | ![image-20200502125311220](../media/science/math_025.png) |                                    | 期望，方差                                       |                          |
| 柏松分布   |                                                           |                                    | 描述单位时间内随机事件发生的次数。                           | 某电话交换台收到的呼叫、来到某公共汽车站的乘客、 |
| 卡方     |                                                           |                                    |                                             |                          |
| F      |                                                           |                                    |                                             |                          |
| 抽样     |                                                           |                                    |                                             |                          |

备注：分布曲线指分布密度函数的图像，如正态分布密度函数的图像称为正态曲线。

1. 二项分布：在n次独立重复的[伯努利试验](https://baike.baidu.com/item/伯努利试验/238488)中，设每次试验中事件A发生的[概率](https://baike.baidu.com/item/概率/828845)为p。用X表示[n重伯努利试验](https://baike.baidu.com/item/n重伯努利试验/238667)中事件A发生的次数，则X的可能取值为0，1，…，n,且对每一个k（0≤k≤n）,事件{X=k}即为“n次试验中事件A恰好发生k次”，[随机变量](https://baike.baidu.com/item/随机变量/828980)X的离散概率分布即为二项分布（Binomial Distribution）。

## 3.3  如何形象地的理解数学概念（先验的、直觉）

近代科学判断一个**概念**是否有用，或者一个现象是否“科学上存在”，其标准是要看能否观测它（至少在原理上），或能否转为可观测的事实。比如下面章节中“极限”的精准定义要求是严谨的、可验证的。

数学概念是经过高度抽象后形成的。要理解数学，就要把抽象的概念直觉化，成为一种思考本能。

**微积分**：导数是切线的斜率；定积分是求面积。

**线性代数**：

### 极限和连续性的精准定义

**序列an**的极限定义：an->a，当n->∞，即  .

如果对于每个无论多么小的正数€，都能找到整数N(依赖于€)，使得对于满足不等式n>=N的所有的n，都有

​    | an – a | < €，

就说序列an 当n趋于无穷时有极限a。

说明：极限就比如是A, B竞赛，A提出要有一个边界€，B则提出依赖于€的N的存在。

**连续趋近函数f(x)**的极限定义（柯西定义，1820）：

如果对于任意一个无论多么小的正数€，都能找到正数  （依赖于€），使得对满足不等式

​    | x – x1 | <

的所有不等于x1的x，有

| f(x) – a | < € ,

那么说，函数f(x)在x趋近于x1时有权限a。

说明：通过双重边界（€，  ）来定义极限。

当x->∞时，  ,　这个定义类似序列极限。

**连续性**的判别准则：如果x趋于x1时，函数f(x)趋近于f(x1)，以f(x1)为权限，那么就说函数f(x)在点x=x1是连续的。



## 本章参考

<br><br>

# 4 数学应用案例

## 4.1  赌博与概率

赌博本来就是概率的游戏。17世纪，法国贵族德·梅勒在骰子赌博中，有急事必须中途停止赌博。双方各出的30个金币的赌资要靠对胜负的预测进行分配，但不知用什么样的比例分配才算合理。德·梅勒写信向当时法国最具声望的数学家帕斯卡请教。这引起了帕斯卡和大数学家费马的兴趣，他们通过信件交流，提出了一些概率论的原理，从而创立了概率论。

### 4.1.1  彩票

比如买2元彩票中奖，不中（中奖0元）的概率是90%，中奖5元的概率是9%，中奖100元的概率是0.99%，中奖1000元的概率是0.001%。如果我进行无数次尝试，那最后平均下来我能中奖的综合回报就是`0*90% + 5*9% + 100*0.99% + 1000*0.01%`=1.54元

这1.54就是叫做数学期望，当期望大于投入的时候，这个事情就可以做，当期望小于投入的时候，长期来看，这个事情就不值得投资。

我们在这里看到，投入2元，回报只有1.54元。所以对于大部分人来讲长期买彩票必然是亏的，当然我这里算出的1.54只是我为了简单计算随便例举的，真是的肯定不是1.54，但肯定比2小。

这也就是我们笑称彩票叫“智商税”的原因，聪明人不会沉迷彩票。

表格 中国大陆官方发行的彩票（部分）

| 类别   | 名称        | 出现时间 | 玩法规则                                                                                          | 排列组合ilm数 |
| ---- | --------- | ---- | --------------------------------------------------------------------------------------------- | -------- |
| 数字   | 双色球       | 2009 | [中国福利彩票双色球游戏规则](https://bbs.360.cn/forum.php?mod=viewthread&tid=2439498&archive_src=bbs_safe) | 17721088 |
|      | 七乐彩(30选7) | 2002 | [中国福利彩票七乐彩游戏规则](https://bbs.360.cn/forum.php?mod=viewthread&tid=2420011&archive_src=bbs_safe) | 2035800  |
|      | 大乐透       | 2019 | [中国体育彩票超级大乐透游戏规则](https://bbs.360.cn/thread-15685996-1-1.html)                                | 21425712 |
|      | 排列三       | 2009 | [中国体育彩票排列三游戏规则](https://bbs.360.cn/forum.php?mod=viewthread&tid=2244512&archive_src=bbs_safe) | 1000     |
|      | 37选7      |      |                                                                                               | 10295472 |
| 竞彩足球 | 14场胜负     |      |                                                                                               |          |
|      | 任意9场      |      |                                                                                               |          |
|      | 6场半全场     |      |                                                                                               |          |
|      | 4场进球      |      |                                                                                               |          |

说明： 排列组合数指所有可能的中奖组合的排列组合数加起来，中头奖概率=1/排列组合数

* 发行组织：中国福利彩票发行管理中心(以下简称中福彩中心)

* 销售渠道：一般线上或门店全国销售，也有部门是省市自行组织销售的。

* 每注价格：一般2元

* 奖项：分高项奖和低项奖。高项奖浮动额度，将奖金比例分配，低项奖固定额度。高项奖一般是一到三等奖。

* 高项奖额的计算公式：`[(当期销售总额*总奖金比例)-低项奖奖金总额]*单项奖比例`

* 当期返回奖金：一般是销售额的50%，其中1%作为调节基金。但因为单注最高奖金额的限制，实际返回奖金低于50%，一般在40%左右。

**彩票模型评价**

通过调整高等奖的中奖比例等措施，激发彩民的购买欲望，在销售额和返奖率之间平衡，以达到最大的销售利润（=销售额*(1-实际返奖率））。 可参见  2002年全国大学生数学建模竞争《[彩票中的数学规律](https://www.docin.com/p-54065232.html)》

通过主成分分析法PCA，得到彩票模型重要的几个特征（备注：双色球方案不在这个模型考虑内）：

* 总中奖率：应该大于3%。双色球是6.7%。
* 低项奖的奖金分配率：应大于35%。
* 一等奖的奖金分配率：宜不超过50%。
* 号码数量：不要超过31
* 奖项数：可以多些。

#### 彩票-双色球

题目类型：二类不重复球取值的概率统计

**玩法规则**：投注者须先从33个红球号码中选择6个，再从16个蓝球号码中选择1个组成一注（红球号码1-33，蓝球号码1-16）。 详见 [中国福利彩票双色球游戏规则](https://bbs.360.cn/forum.php?mod=viewthread&tid=2439498&archive_src=bbs_safe)

**原理**：分类计数和分步计数综合考虑，排列组合同时出现时按先选再排的原则。

首先列出所有中奖的类别，然后分别计算每个类别的组合数，最后所有类别的组合数加起来即组合总数。计算每个类别时，采用分步计算，第一步算红球时的组合数（这步因为红球多个，又分二步计算），第二步算蓝球时的组合数，再加各步骤相乘。

组合总数：17721088

* 公式   $$C_{33}^6*C_{11}^1$$或者  C(33, 6)*C(16,1)
* EXCEL:  `=combin(33,6)*combin(16,1)`

单个类别的计算公式：

法1： 按蓝球是否中二分条件（0或1）拆分

* 红球中n个，蓝球中1个： $C_6^n*C_{27}^{6-n}*1$

* 红球中n个，蓝球不中： $C_6^n*C_{27}^{6-n}*15$
  
  法2： 红球中n个，蓝球中m个(n<=6, m<=1)： $C_6^n*C_{27}^{6-n}*C_1^m*C_{15}^{1-m}$

表格 双色球中奖概率

| 奖项分类 | 中奖数目<br>（红球数+蓝球数） | 中奖组合数                           | 中奖概率                         | 中奖额     |
| ---- | ----------------- | ------------------------------- | ---------------------------- | ------- |
| 一等奖  | 6+1               | $C_6^6*C_{27}^0*C_1^1$=1        | 1/17721088=<BR>0.00000005643 | 约500万   |
| 二等奖  | 6+0               | $C_6^6*C_{27}^0*C_{15}^1$=15    | 0.00000084645                | 约20-35万 |
| 三等奖  | 5+1               | $C_6^5*C_{27}^1*C_1^1$=162      | 0.00000914165                | 3000元   |
| 四等奖  | 5+0               | $C_6^5*C_{27}^1*C_{15}^1$=2430  | 0.00013712476                | 200元    |
|      | 4+1               | $C_6^4*C_{27}^2*C_{1}^1$=5265   | 0.00029710365                | 200元    |
| 五等奖  | 4+0               | $C_6^4*C_{27}^2*C_{15}^1$=78975 | 0.00445655481                | 10元     |
|      | 3+1               | $C_6^3*C_{27}^3*C_1^1$=58500    | 0.00330115171                | 10元     |
| 六等奖  | 2+1               | $C_6^2*C_{27}^4*1$=263250       | 0.01485518271                | 5元      |
|      | 1+1               | $C_6^1*C_{27}^5*1$=484380       | 0.02733353618                | 5元      |
|      | 0+1               | $C_6^0*C_{27}^6*1$=296010       | 0.01670382767                | 5元      |
| 小 计  |                   |                                 | 0.067                        |         |
| 无奖项  | 3+0               | $C_6^3*C_{27}^3*15$=877500      | 0.04951727569                | 0       |
|      | 2+0               | $C_6^2*C_{27}^4*15$=3948750     | 0.22282774060                | 0       |
|      | 1+0               | $C_6^1*C_{27}^5*15$=7265700     | 0.41000304270                | 0       |
|      | 0+0               | $C_6^0*C_{27}^6*15$=4440150     | 0.25055741498                | 0       |
| 小 计  |                   |                                 | 0.9329                       |         |

>  计算每个中奖类别的奖金总额（中奖额*中奖数），累加最终得到的就是预期收益。当销售收入大于预期收入，就是利润了。

双色球各个奖项的中奖概率：

一等奖1种可能性，概率为1/17,721,088；

二等奖15种可能性，概率约为1/1,181,406；

三等奖162种可能性，概率约为1/109,389；

四等奖7,695种可能性，概率约为1/2,303；

五等奖137,475种可能性，概率约为1/129；

六等奖1,043,640种可能性，概率约为1/16；

总中奖概率约为1/16。

**开奖结果示例**

双色球 第*2021070*期

开奖时间： 2021-06-24 (星期四)   每周二、四、日 21:20开奖

- 投注总额：*356,032,100* 元
- 奖池累计**：840,734,349** 元(目前奖池至少可开出168注500万大奖)

| 奖项  | 中奖条件        | 全国中奖注数    | 每注奖金      | 奖金额         |
| --- | ----------- | --------- | --------- | ----------- |
| 一等奖 | 6+1         | 6         | 8,972,728 | 53,836,368  |
| 二等奖 | 6+0         | 179       | 166,455   | 29,795,445  |
| 三等奖 | 5+1         | 980       | 3,000     | 2,940,000   |
| 四等奖 | 5+0/4+1     | 53,848    | 200       | 10,769,600  |
| 五等奖 | 4+0/3+1     | 1,106,832 | 10        | 11,068,320  |
| 六等奖 | 2+1/1+1/0+1 | 6,099,191 | 5         | 30,495,955  |
| 合计  |             | 7,261,036 |           | 138,905,688 |

> 说明：彩票法第十八、十九条： 据国家有关规定，“双色球”彩票单注奖金封顶的最高限额为500万元，但本期却接近900万元，因此超出部分会计入下一期奖池，这造成了奖池额越来越大。
> 
> 本期返奖率=`138,905,688/356,032,100=39.01%`

#### 彩票-大乐透

题目类型：二类不重复球取值的概率统计

**玩法规则**：超级大乐透基本投注是指从前区号码中任选5个号码，并从后区号码中任选2个号码的组合进行投注。其中，前区号码由01—35共35个号码组成，后区号码由01—12共12个号码组成。 详见 [[中国体育彩票超级大乐透游戏规则](https://bbs.360.cn/thread-15685996-1-1.html)](https://bbs.360.cn/forum.php?mod=viewthread&tid=2439498&archive_src=bbs_safe)

**原理**：分类计数和分步计数综合考虑，排列组合同时出现时按先选再排的原则。

首先列出所有中奖的类别，然后分别计算每个类别的组合数，最后所有类别的组合数加起来即组合总数。计算每个类别时，采用分步计算，第一步算前区时的组合数（这步因为取多个，又分二步计算），第二步算后区时的组合数（这步因为取多个，又分二步计算），再加各步骤相乘。

组合总数：$C_{35}^5*C_{12}^2$=21425712

单个类别的计算公式：

* 前区中n个，后区中m个(n<=5, m<=2)： $C_5^n*C_{30}^{5-n}*C_2^m*C_{10}^{2-m}$

表格 大乐透中奖概率

| 奖项分类 | 中奖条件 | 中奖组合数                                   | 中奖概率       | 中奖额    |
| ---- | ---- | --------------------------------------- | ---------- | ------ |
| 一等奖  | 5+2  | 1                                       | 1/21425712 | 约1000万 |
| 二等奖  | 5+1  | $C_5^5*C_{30}^0*C_{2}^1*C_{10}^1$=20    |            | 约10万   |
| 三等奖  | 5+0  | $C_5^5*C_{30}^0*C_{2}^0*C_{10}^2$=45    |            | 10000元 |
| 四等奖  | 4+2  | $C_5^4*C_{30}^1*C_{2}^2*C_{10}^0$=150   |            | 3000元  |
| 五等奖  | 4+1  | $C_5^4*C_{30}^1*C_{2}^1*C_{10}^1$=3000  |            | 300元   |
| 六等奖  | 3+2  | $C_5^3*C_{30}^2*C_{2}^2*C_{10}^0$=4350  |            | 200元   |
| 七等奖  | 4+0  | $C_5^4*C_{30}^1*C_{2}^0*C_{10}^2$=6750  |            | 100元   |
| 八等奖  | 3+1  | $C_5^3*C_{30}^2*C_{2}^1*C_{10}^1$=87000 |            | 15元    |
|      | 2+2  | $C_5^2*C_{30}^3*C_{2}^2*C_{10}^0$=40600 |            | 15元    |
| 九等奖  | 3+0  |                                         |            | 5元     |
|      | 2+1  |                                         |            | 5元     |
|      | 1+2  |                                         |            | 5元     |
|      | 0+2  |                                         |            | 5元     |
| 小 计  |      |                                         |            |        |
| 无奖项  | 2+0  |                                         |            | 0      |
|      | 1+1  |                                         |            | 0      |
|      | 1+0  |                                         |            | 0      |
|      | 0+0  |                                         |            | 0      |
| 小 计  |      |                                         |            |        |

#### 竞彩足球

**规则**：赛果以全场90分钟（含伤停补时，不含加时赛及点球）为准，返奖率最高73%

概率 = 投注返还率/赔率

返还率（用D表示），胜，平，负的赔率分别用A，B，C表示

`D = A*B*C/(A*B+B*C+A*C)`

比如，某场比赛的胜比负赔率分别是2.1, 3.1, 3.1，那么返还率就是：

`D =2.1*3.1*3.1 / (2.1*3.1+3.1*3.1+2.1*3.1) = 89.178`

#### 彩球抽奖问题

问题描述：袋子里N种颜色的球，每种颜色的球都是M个，从中抽取Z个(Z<N)。

或者 袋子里分别写着0-9十个数字，每个数字M个球。从中抽取Z个(Z<N)，抽完的不放回去。请问抽中两个、三个、四个相同数字球的概率分别是多大?

【**例1**】： 一个不透明盒子里有56个球，其中有6个球为彩球，一次从中抽6个球。问：抽到0到6个彩球的概率分别是多少？

解答：从56个球中抽6个球的组合是$C_{56}^6$=32468436。分步计算，先从6个彩球中抽取N个（N<6)，再从余下的50个球中抽取（6-N个）。下面计算抽N个彩球的组合数，计算出来的组合数除以 32468436 就是相应的概率。

分项组合数计算公式： $C_6^n*C_{50}^{6-n}$

抽中N个彩球的组合数是：（下列七种组合数相加 等于 总组合数）

0个彩球： $C_6^0*C_{50}^6$=15890700

1个彩球： $C_6^1*C_{50}^5$=12712560

2个彩球： $C_6^2*C_{50}^4$=3454500

3个彩球： $C_6^3*C_{50}^3$=392000

4个彩球： $C_6^4*C_{50}^2$=18375

5个彩球： $C_6^5*C_{50}^1$=300

6个彩球： $C_6^6*C_{50}^0$=1

【**例2**】50个球，分别写着0-9十个数字，每个数字5个球。抽奖为抽取5个球，抽完的不放回去。请问，抽中两个、三个、四个相同数字球的概率分别是多大?

解答：分步计算，10个数字即10类。第一步选类，从10个数字中选择一个数字，有10种；然后在相同数字的5个球中选抽中数N=C(5, N)。第二步再从余下的9类数字中抽取5-N类，每类有~~10~~种方法，那么有10^(5-N)。计算抽N个相同数字的组合数，计算出来的组合数除以 总组合数就是相应的概率。

总组合数：$C_{50}^5$=2118760

分项组合数计算公式： $C_{10}^1*C_5^N*C_9^{5-N}*5^{5-N}$     (1<N<=5)

分项的概率= 分项组合数/总组合数。

抽中N个相同数字的组合数是：（10个数字球，每个数字5个球，抽取5个）

1个相同数字（即没有相同数字，为5个不同数字）： $C_{10}^5*A_5^5$=~~30240~~

2个相同数字： $C_{10}^1*C_5^2*C_{9}^3*5^3$=1050000（~~计算有误，比总组合数还大？~~）

3个相同数字： $C_{10}^1*C_5^3*C_{9}^2*5^2$=90000

4个相同数字： $C_{10}^1*C_5^4*C_{9}^1*5$=2250

5个相同数字： $C_{10}^1*C_5^5$=10

【**例3**】有6种不同颜色的球，分别记为1,2,3,4,5,6，每种球有无数个。现在取5个球，求抽到5种、4种、3种、2种不同颜色的球的分别概率？

解答：既然每种颜色的球都是无数的话，就相当于有6个不同颜色的球，拿了之后再放回去，一个道理啦！所有可能可能组合是6^5=7776

5种颜色：先选5个颜色,那就是C(6,5),那么考虑到任意选择顺序,p(5,5) = 5!,结果是C(6,5) * P(5,5) = 720;

4种颜色：先选4个颜色,那就是C(6,4),那么肯定会有重复颜色，挑出重复颜色是C(4,1).考虑到任意拿球顺序是P(5,5),去掉重复的是2!.结果是 C(6,4)*C(4,1)*5!/2!=3600.

3种颜色：先选3个颜色，那就是C(6,3),那么重复颜色是两种可能，比如abccc和abbcc，前者是C(3,1)*5!/3!,后者是C(3,2)*5!/2!/2!,结果是 C(6,3)*(C(3,1)*5!/3!+C(3,2)*5!/2!/2!)=3000.

2种颜色：一种是abbbb,一种是aabbb.前者是C(2,1) * 5!,后者是C(2,1)*5!/2!/3!.结果是C(6,2)*(C(2,1)*5!/4!+C(2,1)*5!/2!/3!)=450.

1种颜色：C(6,1)=6

| 条件   | 公式                                      | 排列组合数 | 逻辑                                                                   |
| ---- | --------------------------------------- | ----- | -------------------------------------------------------------------- |
| 5种颜色 | `C(6,5)*P(5,5)`                         | 720   | 先选5个颜色C(6,5)，再考虑5个球的选择顺序P(5,5)                                       |
| 4种颜色 | `C(6,4)*C(4,1)*5!/2!`                   | 3600  | 先选4个颜色C(6,4)，再挑出重复颜色C(4,1), <BR>再考虑5个球的选择顺序P(5,5), 去掉重复结果2!          |
| 3种颜色 | `C(6,3)*(C(3,1)*5!/3!+C(3,2)*5!/2!/2!)` | 3000  | 先选3个颜色C(6,3)，再挑出重复颜色有2种可能abccc或者abbcc, <BR>再考虑5个球的选择顺序P(5,5), 去掉重复结果 |
| 2种颜色 | `C(6,2)*(C(2,1)*5!/4!+C(2,1)*5!/2!/3!)` | 450   | 先选2个颜色C(6,2)，再挑出重复颜色有2种可能abbbb或者aabbb,                               |
| 1种颜色 | C(6,1)                                  | 6     |                                                                      |
| 小计   |                                         | 7776  | 各组合数之和等于总组合数，逻辑正确。                                                   |

### 4.1.2  稳赚不赔的赌场

**关于风险**

风险分成三类风险，

第一种是**系统型风险**，就是有时候会发生小概率的坏事，而作者指出，其实赚钱也来自于这种风险，叫做“盈亏同源”，这种风险不可避免，避免了这种也就避免了盈利。

第二种风险被称为**人为型风险**，就是在一些情况下我们不能保持冷静而做出的非理性选择，人为踏入了一些风险场合。风险做得好的，就是把这种控制得很好。

第三种风险叫做 **博弈型风险**，就是在和别人对手盘的时候，对方利用一些有利条件，给你制造的风险，比如我们玩扎金花的时候，有人会有“偷鸡”的玩法。也比如在股市上，有机构想要上涨之前，先往下杀价格，引起散户恐慌抛盘，已达到在低位拿筹码的目的。这些都属于博弈型风险，好的风险控制者，是反而可以利用这种情况的博弈。

在这个赌场里面，玩家始终和庄家对赌，而庄家不会有人为动作，所以博弈风险是不存在的。庄家在规则的设定上对它有利，而我们的优势是有主动权。

#### 21点：赌场里最可能赢钱的游戏

21 点（Blackjack）是赌场里最可能赢钱的游戏，也是那里唯一相对公平的游戏，在采取最佳玩法的情况下，玩家胜率高达 49%。不过要想长期赢钱，这 2% 的劣势也无法容忍，高端赌徒们会用变换赌注或者团体作战的方法把这一点劣势扳回来。

**21点的玩法**

这个游戏分庄、玩两方，通常庄家在一张半圆形的牌桌上同时应付各自为战的 5 到 7 个玩家，道具就是多副除去大小鬼混在一起的扑克牌。玩家的目标是让自己牌的点数和大于庄家，不过这个和如果超过 21 点就直接出局了（也就是爆了）。花牌算 10 点，A可以根据需要算成 11 分或 1 分。

#### 德州扑克

德州扑克的玩法：

#### 摇骰子，买大小

买大小的玩法：摇骰子有买大、小、豹子三种可能，有三个骰子，点数4-10为小，11-17为大，而三个骰子都是一样的数既不是大也不是小。买大或者小1赔1，买豹子1赔6。

<br>

### 4.1.3  抛硬币的游戏（凯利公式）

在抛硬币的游戏中，从古至今似乎有一种魔力吸引了无数的高智商群体对其研究痴迷，流传至今主流的策略概况有二：等价鞅策略与反等价鞅策略。

* 等价鞅策略：输了将赌注翻倍直到赢为止，赢了将赌注恢复至初始值；

* 反等价鞅策略：总是按现有资金总额的一定比例下注。

等价鞅策略致命的弱点是博弈者在连续若干次失败后将没有足够资金继续赌注翻倍的游戏，因为赌注会随着失败次数呈2次方的速度增长，而反等价鞅策略汲取“日取其半，万世不竭”的道理，使得我们能够永远的继续这个游戏下去，哪怕成为百万富翁的概率多么小，也是会成功的，而一旦游戏触及我们的“止盈”条件，就可以终止游戏，所以今天，我们就想来谈谈反等价鞅策略中的著名公式。

假设您有100美金进行一项抛硬币游戏——如果硬币为正面，您1美元就赢2美元；如果硬币为反面，您就输1美元。您每次该投入本金的百分之多少来获得收益的最大化呢？

凯利公式告诉您：25%。

那么，凯利公式（Kellyformula）究竟是什么？

$$
f* = \frac{bp-q}{b} = \frac{p(b+1)-1}{b}
$$

* f*=现有资金应进行下次投注的比例（也就是我们刚才要求的答案）
* b=赔率（赔率＝期望盈利÷可能亏损=2美元盈利÷1美元亏损，赔率就是2了）
* p=成功概率（抛硬币正反面都是50%的概率）
* q=失败概率（也就是1-p，赌局中也是50%了）

以上面游戏为例计算过程就是 `(bp-q)÷b=(2*50%-50%)÷2=25%`

从公式我们可以获得我们投资的一点启发：

1、只有出现赢面（bp-q）为正的时候，游戏才可以下注，这是一切赌戏和投资最基本的道理，也就是前面讲的“没有把握，决不下注”。

2、赢面还要除以“b”才是投注资金比例。也就是说赢面相同的情况下，赔率越小越可以多押注。

<br>

### 4.1.4  大话骰

首先核实一下游戏规则：
假设两个人玩，

* 每人的杯中有5个骰子，双方摇好后只可看到自己杯中所有骰子的点数。

* 一方先猜两个人杯中一共有N个T点，其中N 取1到10间的一个整数，T 是1到6之间的整数。

* 这时对方有两种选择：
  
  - 不相信10个骰子中有N个T或大于N个T点，此时双方摊牌（掀杯），输赢自见分晓。
  
  - 猜10个骰子中有多余N个T，比如说N+1或N+2个T；也可以猜有N个更大的点数，比如说N个T+1点或N个N+2点。原则是新猜的N和T都不能比对方上一次猜得小。
    
    - 1点可以当任意点使用，比如五个骰子的点数是1，2，2，3，4，则可以说有三个2点，二个4点。
    
    - 如果第一个猜骰子从1点开始猜起，即开始就猜共有N个1点，那么上一条规则作废，即在此轮游戏中，1点不再可以当任意点使用。

双方摇好骰子后，既然你知道自己杯中的点数，而猜的是两人杯中某个点数出现次数之和，所以游戏中只要了解对方杯中的5个骰子每点出现的概率。五颗骰子投出的总数是6^6=7776。

特殊情况：顺子指五颗骰子完全不一样，豹子指五颗骰子完全一样。顺子比豹子大。

**问题0**：豹子出现的概率？

表格 豹子的概率分布情况

| 类别                          | 计算公式          | 值   |
| ----------------------------- | ----------------- | ---- |
| 5个骰子完全一样               | C(6, 1)           | 6    |
| 5个骰子有1个1，其它4个一样非1 | C(5, 1) * C(5, 1) | 25   |
| 5个骰子有2个1，其它3个一样非1 | C(5, 2) * C(5, 1) | 50   |
| 5个骰子有3个1，其它2个一样非1 | C(5, 3) * C(5, 1) | 50   |
| 5个骰子有4个1，其它1个非1     | C(5, 4) * C(5, 1) | 25   |

说明：5个骰子有1点，其它4个一样非1：5颗选一颗是1，剩下4颗的数字从2-6中选一个数字，所以是C(5, 1) * C(5, 1)=25。

所以出现豹子的总数是6+25+50+50+25=156；出现豹子的概率是156/7776=23/1296，约等于0.02



**问题1**：随机的情况下，五个骰子中只有一个骰子是1点的概率是多少呢？

表格 五个骰子中1点的概率分布情况

| 类别          | 计算公式                    | 值     |
| ------------- | --------------------------- | ------ |
| 零个骰子是1点 | (5/6)^5 * C(5, 0)           | 0.4    |
| 1个骰子是1点  | 1/6 * (5/6)^4 * C(5, 1)     | 0.4    |
| 2个骰子是1点  | (1/6)^2 * (5/6)^3 * C(5, 2) | 0.16   |
| 3个骰子是1点  | (1/6)^3 *(5/6)^2 * C(5, 3)  | 0.03   |
| 4个骰子是1点  | (1/6)^4 *(5/6)^1 * C(5, 4)  | 0.003  |
| 5个骰子是1点  | (1/6)^5 *(5/6)^0 * C(5, 5)  | 0.0001 |

备注：掷骰子后，五个骰子中某一个出现1点的概率都是1/6=1/6，而非3点的概率是1-1/6=5/6。

5个骰子中有零个骰子是1点的概率是 
$$
( \frac{5}{6}) ^{5}\times C_{5}^{0} \approx 0.4
$$


5个骰子中只有一个骰子是1点的概率是 
$$
 \left( \frac{5}{6}  \right) ^{4}\times C_{5}^{1} \approx 0.4
$$


**问题2**：1点可当作任意点的随机情况下，五个骰子中3点的概率分布情况

表格 五个骰子中3点的概率分布情况（1点可当作任意点）

| 类别          | 计算公式                     | 值    |
| ------------- | ---------------------------- | ----- |
| 零个骰子是3点 | (2/3)^5 * C(5, 0)            | 0.13  |
| 1个骰子是3点  | 1/3 * (2/3))^4 * C(5, 1)     | 0.33  |
| 2个骰子是3点  | (1/3)^2 * (2/3))^3 * C(5, 2) | 0.33  |
| 3个骰子是3点  | (1/3)^3 *(2/3))^2 * C(5, 3)  | 0.16  |
| 4个骰子是3点  | (1/3)^4 *(2/3)^1 * C(5, 4)   | 0.04  |
| 5个骰子是3点  | (1/3)^5 *(2/3))^0 * C(5, 5)  | 0.004 |

备注：掷骰子后，五个骰子中某一个出现3点的概率都是2/6=1/3，而非3点的概率是1-1/3=2/3。

<br>

### 4.1.5  简易小赌博

#### 三张卡片的骗局

我们先准备有三张卡片，1号卡片正反面都是黑色，2号卡片正反面都是红色，3号卡片一面是黑色，一面是红色。然后把卡片放进一个盒子里，摇一摇，让对手抽一张平放在桌子上。接着和他赌反面的颜色和正面一样。这个赌局看起来是公平的，比如抽到一张表面是黑色的卡片，那么卡片不是1号就是3号，反面的颜色不是黑色就是红色，直觉上概率各占1/2。

事实上我们赢的概率不是1/2，而是2/3，这个赌局最迷惑人的地方是卡片的“两面性”。玩家抽的不是3张牌，而是6个面：3个黑面，3个红面。我们把这6个面编上号A、B、C、D、E、F：

当玩家抽到黑面时，也就是A、C、D三种等可能的情况，它们的背面则分别是D、F、A，黑色的情形占了2/3。

这个问题最早于1889年由法国数学家伯特纳（Joseph Louis François Bertrand）提出，因为这个问题的结果出人意料，它又被称为“伯特纳箱悖论（Bertrand's box paradox）”。1950年美国数学家沃伦•韦弗（Warren Weaver）介绍了上面的卡片玩法，马丁•加德纳（Martin Gardner）称之为“三张卡片的骗局（three-card swindle）”。<br>

#### 如此不平凡的黑桃A

备注：桥牌去除大小王共52张，每人13张，有4种花色（黑桃、红心、方块、红桃）。

有时候我们赌博一开始会放水，先让别人赚些小钱，放长线钓大鱼，最后来个一网打尽。下面就是一个绝佳的范例。四个人在打桥牌，我先说：“来打个赌吧，我现在有一张A，你们猜猜我还有没有更多A？”这种情况下你很可能会输，这时你在心里默默指定一个花色的A，比如说黑桃A，当某一轮抓到一张黑桃A后，这时机会就来了：“再打一个赌吧，我现在有一张黑桃A，你们猜猜我还有没有更多的A？”

很多人肯定觉得两个赌根本没什么不同的嘛，加了个黑桃并不要紧。可它们间的区别，大到令人不敢相信。我们就先算算第一次赌的概率吧：

没有A的情形：C(48，13)

至少有1张A的情形：C(52，13)－C(48，13)

恰好有1张A的情形：4＊C(48，12)

至少有2张A的情形：C(52，13)－C(48，13)－4＊C(48，12)

事件X为至少有两张A，事件Y为至少有一张A，那么条件概率为：

`P(X｜Y)=P(XY)/P(Y)=(C(52，13)-C(48，13)-4*C(48，12))/(C(52，13)-C(48，13))≈37%`

这个时候我要赌自己还有A，比较容易输掉。但是有了第一个赌的铺垫之后，大家打赌的意愿都被调动起来了，一看第二个赌不就是换了身衣服嘛，纷纷加大赌注，接着赌我没有更多A，正中我们下怀。下面我们将发现第二个赌的概率已经大大不同：

有黑桃A的情形：C(51，12)

没有其它A的情形：C(48，12)

还有其它A的情形：C(51，12)－C(48，12)

事件X为还有其它A，事件Y为有黑桃A，条件概率为：

`P(X｜Y)=P(XY)/P(Y)=(C(51，12)-C(48，12))/C(51，12)≈56%`

<br>

## 本章参考

[1].  学好概率论，赌博稳赚不赔 http://www.guokr.com/article/33711/

[2].  赌场和金融圈最著名的一个公式 http://www.sohu.com/a/108786078_460455

[3].  21点：赌场里最可能赢钱的游戏 http://www.guokr.com/article/307091/

[4].  一种赌场里大概率赚钱的方式 https://xueqiu.com/2053170219/68288487 、

[5].  [blackjack strategy](http://www.blackjack-strategy.ca/)

[6].  《迷失的天才》 麦兹瑞治 / 季思聪、纪华 / 中国青年出版社 / 2004-9-1

[7].  从概率学和心理学层面上分析玩大话骰的攻略？-知乎 https://www.zhihu.com/question/22710731

[8]. 360彩票  https://cp.360.cn/

[9].  2002年大学生数学建模竞赛之[彩票中的数学规律](https://www.docin.com/p-54065232.html)

[10]. 毕业论文-抽奖活动中的概率问题 https://wenku.baidu.com/view/dab2f8e3ed630b1c58eeb52d.html

* 豹子概率 https://zhidao.baidu.com/question/168288883.html

<br><br>

# 参考资料

<br><br>

# 附录
